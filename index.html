<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="ySenIn's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="ä¸€ä¸ªå­¤ç‹¬çš„äººï¼Œä¸€ä¸ªä¸æƒ³å­¤ç‹¬çš„äºº">
<meta property="og:type" content="website">
<meta property="og:title" content="ySenIn's Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="ySenIn's Blog">
<meta property="og:description" content="ä¸€ä¸ªå­¤ç‹¬çš„äººï¼Œä¸€ä¸ªä¸æƒ³å­¤ç‹¬çš„äºº">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ySenIn's Blog">
<meta name="twitter:description" content="ä¸€ä¸ªå­¤ç‹¬çš„äººï¼Œä¸€ä¸ªä¸æƒ³å­¤ç‹¬çš„äºº">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'åšä¸»'
    }
  };
</script>

  <title> ySenIn's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">ySenIn's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">ySen</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            ç•™è¨€
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/10/19/pinyin4objcæºç é˜…è¯»/" itemprop="url">
                  pinyin4objcæºç é˜…è¯»
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2017-10-19T14:43:32+08:00" content="2017-10-19">
              2017-10-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/æºç å‰–æ/" itemprop="url" rel="index">
                    <span itemprop="name">æºç å‰–æ</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/10/19/pinyin4objcæºç é˜…è¯»/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/10/19/pinyin4objcæºç é˜…è¯»/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æºç å‚è§ï¼š<a href="https://github.com/kimziv/PinYin4Objc.git" target="_blank" rel="external">https://github.com/kimziv/PinYin4Objc.git</a><br>ç‰ˆæœ¬ï¼š1.1</p>
<h3 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h3><p>æ±‰å­—è½¬æ‹¼éŸ³ï¼Œç›¸ä¿¡åœ¨å¾ˆå¤šappéƒ½ä¼šé‡åˆ°ï¼Œä¾‹å¦‚ï¼šé€šè®¯å½•ã€æ¶ˆæ¯ã€æœç´¢ç­‰ã€‚æ±‰å­—è½¬æ‹¼éŸ³æœ‰å¾ˆå¤šç§æ–¹å¼å¯ä»¥æ˜¯å®ç°ï¼Œæœ¬æ–‡æ‰€è®²çš„æ˜¯å…¶ä¸­ä¸€ç§ï¼›å½“ç„¶ï¼Œè‹¹æœä¹Ÿæœ‰è‡ªå·±çš„å®ç°æ–¹å¼ã€‚è‹¹æœå†…éƒ¨å®ç°å°±çœŸå¿ƒä¸æƒ³åæ§½äº†ï¼Œè¶…çº§æ…¢ï¼Œåç»­ä¼šæ‰¾ä¸€äº›æ•°æ®æ¥è¯´æ˜ã€‚é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥å°±çœ‹çœ‹PinYin4Objcæ˜¯å¦‚ä½•å®ç°é«˜æ•ˆçš„è½¬åŒ–ã€‚</p>
<h3 id="å‰æ³¨"><a href="#å‰æ³¨" class="headerlink" title="å‰æ³¨"></a>å‰æ³¨</h3><h4 id="å¸¸é‡ã€æšä¸¾"><a href="#å¸¸é‡ã€æšä¸¾" class="headerlink" title="å¸¸é‡ã€æšä¸¾"></a>å¸¸é‡ã€æšä¸¾</h4><p>åœ¨é˜…è¯»æºç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è®¤è¯†ä¸€ä¸‹PinYin4Objcé‡Œé¢çš„å¸¸é‡ä»¥åŠæšä¸¾å€¼ï¼š<br></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#define HANYU_PINYIN @&quot;Hanyu&quot;</span><br><span class="line">#define WADEGILES_PINYIN @&quot;Wade&quot;</span><br><span class="line">#define MPS2_PINYIN @&quot;MPSII&quot;</span><br><span class="line">#define YALE_PINYIN @&quot;Yale&quot;</span><br><span class="line">#define TONGYONG_PINYIN @&quot;Tongyong&quot;</span><br><span class="line">#define GWOYEU_ROMATZYH @&quot;Gwoyeu&quot;</span><br><span class="line"></span><br><span class="line">MPS2_PINYINï¼šæ³¨éŸ³ç¬¦å·ç¬¬äºŒå¼</span><br><span class="line">YALE_PINYINï¼šè€¶é²æ‹¼æ³•</span><br><span class="line">HANYU_PINYINï¼šæ±‰è¯­æ‹¼éŸ³</span><br><span class="line">TONGYONG_PINYINï¼šé€šç”¨æ‹¼éŸ³</span><br><span class="line">GWOYEU_ROMATZYHï¼šå›½è¯­ç½—é©¬å­—</span><br><span class="line">WADEGILES_PINYINï¼šå¨å¦¥ç›æ‹¼éŸ³(å¨ç›æ‹¼æ³•)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> éŸ³è°ƒï¼Œä¾‹ï¼šåˆ˜</span><br><span class="line"> */</span><br><span class="line">typedef enum &#123;</span><br><span class="line">  ToneTypeWithToneNumber,   // ç”¨æ•°å­—è¡¨ç¤ºå£°è°ƒï¼Œä¾‹å¦‚ï¼šliu2</span><br><span class="line">  ToneTypeWithoutTone,      // æ— éŸ³è°ƒï¼Œä¾‹å¦‚ï¼šliu</span><br><span class="line">  ToneTypeWithToneMark      // ç”¨å£°è°ƒç¬¦å·è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼šliÃº</span><br><span class="line">&#125; ToneType;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> å¤§å°å†™ï¼Œä¾‹ï¼šå›½</span><br><span class="line"> */</span><br><span class="line">typedef enum &#123;</span><br><span class="line">    CaseTypeUppercase,  // GUÃ“</span><br><span class="line">    CaseTypeLowercase   // guÃ³</span><br><span class="line">&#125; CaseType;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> unicode çš„Ã¼ ã€v å’Œ uæ—¶çš„æ˜¾ç¤ºæ–¹å¼ï¼Œä¾‹ï¼šå•</span><br><span class="line"> */</span><br><span class="line">typedef enum &#123;</span><br><span class="line">    VCharTypeWithUAndColon, // lu:3</span><br><span class="line">    VCharTypeWithV,         // lv3</span><br><span class="line">    VCharTypeWithUUnicode   // lÃ¼3</span><br><span class="line">&#125; VCharType;</span><br></pre></td></tr></table></figure>
<p>å‰é¢çš„ä»£ç å‚è€ƒ<a href="http://www.cnblogs.com/mthoutai/p/6745293.html" target="_blank" rel="external">java ä¸­æ–‡è½¬æ‹¼éŸ³ä¹‹pinyin4j</a>ã€‚å½“ç„¶ï¼Œåœ¨ç§»åŠ¨ç«¯å…¶å®å¹¶ä¸ä¼šä½¿ç”¨å¤ªå¤šæ ¼å¼ï¼Œå› æ­¤ç®€å•ä»‹ç»ï¼Œå¹¶ä¸ä½œè¯´æ˜ã€‚è¯¦æƒ…å¯ä»¥å‚è§å¤–é“¾çš„æ–‡ç« ã€‚</p>
<h4 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h4><p>æºä»£ç ä¸­å°±åªæœ‰å‡ ä¸ªæ–‡ä»¶ï¼Œä»£ç é€»è¾‘ä¹Ÿä¸ä¼šå¾ˆå¤æ‚ã€‚åœ¨æ·±å…¥é˜…è¯»ä»£ç ä¹‹å‰ï¼Œéœ€è¦ææ¸…æ¥šå‡ ä¸ªæ–‡ä»¶çš„ä½œç”¨ã€‚æ¥ä¸‹æ¥ç®€å•æè¿°é¡¹ç›®ä¸­çš„ç±»ï¼š<br></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ChineseToPinyinResource: æ‹¼éŸ³è½¬æ±‰å­—çš„æ–‡ä»¶</span><br><span class="line">HanyuPinyinOutputFormat: è¾“å‡ºæ ¼å¼å®šä¹‰</span><br><span class="line">NSString+PinYin4Cocoa: å·¥å…·æ–¹æ³•è½¬æ¢</span><br><span class="line">PinyinFormatter: æŒ‰ç…§è¾“å‡ºæ ¼å¼ï¼Œæ ¼å¼åŒ–è¿”å›å­—ç¬¦</span><br><span class="line">PinyinHelper: å¼€æºåº“çš„ä½¿ç”¨æ–¹æ³•æ–‡ä»¶</span><br><span class="line">unicode_to_hanyu_pinyin: unicodeç¼–ç å­—å…¸æ–‡ä»¶ï¼ˆæ¯ä¸ªæ±‰å­—ï¼Œå¯¹åº”ä¸€ä¸ªunicodeç¼–ç ï¼‰</span><br></pre></td></tr></table></figure>
<h3 id="è½¬æ¢æ€æƒ³"><a href="#è½¬æ¢æ€æƒ³" class="headerlink" title="è½¬æ¢æ€æƒ³"></a>è½¬æ¢æ€æƒ³</h3><p>pinyin4objcå®é™…ä¸Šæ˜¯å‚è€ƒjavaå½“ä¸­çš„pinyin4jã€‚æ ¸å¿ƒæ€æƒ³ä¹Ÿéå¸¸ç®€å•ï¼Œåœ¨æˆ‘ä»¬è°ƒç”¨æ±‰å­—è½¬æ‹¼éŸ³ä¹‹æ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªå•ä¾‹å¯¹è±¡ã€‚å•ä¾‹é‡Œé¢æ‰€åšçš„äº‹æƒ…å°±æ˜¯ï¼šä»æ²™ç›’ç‹¬å‡ºè¯»å‡ºunicodeå­—å…¸ï¼Œå¦‚æœç‹¬å¤„å¤±è´¥ï¼Œä¼šå°†unicode_to_hanyu_pinyinæ–‡ä»¶ä¸­çš„æ•°æ®è¯»å–åˆ°å­—å…¸ä¸­ï¼Œç„¶åå†å°†æ­¤å­—å…¸ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å°†æ•°æ®ç¼“å­˜åœ¨æ²™ç›’ä¸­ï¼Œä»¥ä¾›ä»¥åä½¿ç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">- (void)initializeResource &#123;</span><br><span class="line">    </span><br><span class="line">    /*</span><br><span class="line">     1. é¦–å…ˆåˆ¤æ–­æ²™ç›’æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæ²™ç›’å­˜åœ¨åˆ™ç›´æ¥ä½¿ç”¨æ²™ç›’æ•°æ®</span><br><span class="line">     2. å¦‚æœæ²™ç›’ä¸å­˜åœ¨ï¼Œåˆ™è¯»å–èµ„æºæ–‡ä»¶æ•°æ®ï¼Œæœ€åå°†èµ„æºæ–‡ä»¶æ•°æ®é€šè¿‡äºŒè¿›åˆ¶çš„æ–¹å¼ç›´æ¥ç¼“å­˜åˆ°æ²™ç›’</span><br><span class="line">     */</span><br><span class="line">    NSString* cachesDirectory = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES)[0];</span><br><span class="line">	_directory = [[[cachesDirectory stringByAppendingPathComponent:[[NSBundle mainBundle] bundleIdentifier]] stringByAppendingPathComponent:@&quot;PinYinCache&quot;] copy];</span><br><span class="line">    </span><br><span class="line">    NSFileManager *fileManager = [NSFileManager defaultManager];</span><br><span class="line">    if (![fileManager fileExistsAtPath:_directory]) &#123;</span><br><span class="line">        NSError *error = nil;</span><br><span class="line">        </span><br><span class="line">        if (![fileManager createDirectoryAtPath:_directory withIntermediateDirectories:YES attributes:nil error:&amp;error]) &#123;</span><br><span class="line">            PYLog(@&quot;Error, s is %@, %s, %s, %d&quot;,error.description, __FILE__ ,__FUNCTION__, __LINE__);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    NSDictionary *dataMap = (NSDictionary *)[self cachedObjectForKey:kCacheKeyForUnicode2Pinyin];</span><br><span class="line">    if (dataMap) &#123;</span><br><span class="line">        self-&gt;_unicodeToHanyuPinyinTable = dataMap;</span><br><span class="line">        </span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        </span><br><span class="line">        NSString *resourceName = [[NSBundle mainBundle] pathForResource:@&quot;unicode_to_hanyu_pinyin&quot; ofType:@&quot;txt&quot;];</span><br><span class="line">        NSString *dictionaryText = [NSString stringWithContentsOfFile:resourceName encoding:NSUTF8StringEncoding error:nil];</span><br><span class="line">        NSArray *lines = [dictionaryText componentsSeparatedByString:@&quot;\r\n&quot;];</span><br><span class="line">        </span><br><span class="line">        __block NSMutableDictionary *tempMap=[[NSMutableDictionary alloc] init];</span><br><span class="line">        </span><br><span class="line">        @autoreleasepool &#123;</span><br><span class="line">                [lines enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) &#123;</span><br><span class="line">                    NSArray *lineComponents = [obj componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];</span><br><span class="line">                    [tempMap setObject:lineComponents[1] forKey:lineComponents[0]];</span><br><span class="line">                &#125;];</span><br><span class="line">         &#125;</span><br><span class="line">        </span><br><span class="line">        self-&gt;_unicodeToHanyuPinyinTable = tempMap;</span><br><span class="line">        [self cacheObjec:self-&gt;_unicodeToHanyuPinyinTable forKey:kCacheKeyForUnicode2Pinyin];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†ä¸­æ–‡ä½œä¸ºkeyï¼Œä»å­—å…¸ä¸­å¯ä»¥å¾—åˆ°æŸç§æ ¼å¼çš„æ‹¼éŸ³ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹å½“ä¸­ï¼ŒæŒ‰ç…§è‡ªå®šä¹‰æ ¼å¼è½¬æ¢æˆæœ€ç»ˆæ‰€ä½¿ç”¨çš„æ ¼å¼å³å¯ã€‚</p>
<h3 id="æ•°æ®"><a href="#æ•°æ®" class="headerlink" title="æ•°æ®"></a>æ•°æ®</h3><p>ç”±ä¸Šè¿°ä»£ç æˆ‘ä»¬èƒ½çœ‹åˆ°ï¼Œç¬¬ä¸€æ¬¡å®‰è£…ä½¿ç”¨æ˜¯ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œä»æŸç§æ„ä¹‰ä¸Šæ¥è§ï¼Œè¿™æ˜¯æ¯”è¾ƒæ…¢çš„ã€‚</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦æ•°</th>
<th>æ¬¡æ•°</th>
<th>æ—¶é—´(ç§’)</th>
</tr>
</thead>
<tbody>
<tr>
<td>19440</td>
<td>ç¬¬ä¸€æ¬¡</td>
<td>0.3546s</td>
</tr>
<tr>
<td>19440</td>
<td>ç¬¬äºŒæ¬¡</td>
<td>0.2665s</td>
</tr>
<tr>
<td>19440</td>
<td>ç¬¬ä¸‰æ¬¡</td>
<td>0.2535s</td>
</tr>
<tr>
<td>9</td>
<td>ç¬¬ä¸€æ¬¡</td>
<td>0.1158s</td>
</tr>
<tr>
<td>9</td>
<td>ç¬¬äºŒæ¬¡</td>
<td>0.0010s</td>
</tr>
<tr>
<td>9</td>
<td>ç¬¬ä¸‰æ¬¡</td>
<td>0.0015s</td>
</tr>
</tbody>
</table>
<p>ä»æ•°æ®æ¥çœ‹ï¼Œé¦–æ¬¡åŠ è½½å¤§æ¦‚ä¼šæ¶ˆè€—0.1sçš„æ—¶é—´åŠ è½½æ–‡ä»¶ã€‚å½“ç„¶ï¼Œåœ¨å®é™…ä½¿ç”¨å½“ä¸­ï¼Œé¦–æ¬¡æ¶ˆè€—æ—¶é—´æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p>
<p>ä»æ•°æ®æˆ‘ä»¬èƒ½çœ‹åˆ°ï¼Œpinyin4objcçš„è½¬æ¢æ•ˆç‡è¿˜æ˜¯éå¸¸å¿«çš„ã€‚ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å•ä¾‹æ¨¡å¼ï¼Œå•ä¾‹å¯¹è±¡åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­æŒæœ‰äº†æ‹¼éŸ³æ–‡ä»¶çš„dictionaryï¼Œè¿™ä¹Ÿå¯¼è‡´è¿™ä¹ˆå†…å­˜åœ¨ç”Ÿå‘½å‘¨æœŸå†…ä¸€ç›´å­˜åœ¨ï¼Œæ­¤å¤„æå‡ºä¸€ä¸ªç–‘é—®ã€‚</p>
<h3 id="å®˜æ–¹è½¬æ¢"><a href="#å®˜æ–¹è½¬æ¢" class="headerlink" title="å®˜æ–¹è½¬æ¢"></a>å®˜æ–¹è½¬æ¢</h3><p>ä¸Šè¿°æåˆ°äº†ç¬¬ä¸‰æ–¹åº“çš„è½¬æ¢ï¼Œå†æ¥çœ‹çœ‹è‹¹æœå†…éƒ¨æ˜¯å¦‚ä½•è½¬æ¢çš„å‘¢ğŸ˜€ğŸ˜€ğŸ˜€ã€‚åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€æ®µä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+ (NSString *)transform:(NSString *)chinese</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableString *pinyin = [chinese mutableCopy];</span><br><span class="line">    CFStringTransform((__bridge CFMutableStringRef)pinyin, NULL, kCFStringTransformMandarinLatin, NO);</span><br><span class="line">    CFStringTransform((__bridge CFMutableStringRef)pinyin, NULL, kCFStringTransformStripCombiningMarks, NO);</span><br><span class="line">    NSLog(@&quot;%@&quot;, pinyin);</span><br><span class="line">    return [pinyin uppercaseString];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•æ•°æ®å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦æ•°</th>
<th>æ¬¡æ•°</th>
<th>æ—¶é—´(ç§’)</th>
<th>ä½¿ç”¨æ–¹æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td>2693 * 100</td>
<td>ç¬¬ä¸€æ¬¡</td>
<td>5.3802s</td>
<td>è‹¹æœå†…ç½®</td>
</tr>
<tr>
<td>2693 * 100</td>
<td>ç¬¬äºŒæ¬¡</td>
<td>5.1389s</td>
<td>è‹¹æœå†…ç½®</td>
</tr>
<tr>
<td>2693 * 100</td>
<td>ç¬¬ä¸‰æ¬¡</td>
<td>4.9573s</td>
<td>è‹¹æœå†…ç½®</td>
</tr>
<tr>
<td>164  * 100</td>
<td>ç¬¬ä¸€æ¬¡</td>
<td>0.5060s</td>
<td>è‹¹æœå†…ç½®</td>
</tr>
<tr>
<td>164  * 100</td>
<td>ç¬¬äºŒæ¬¡</td>
<td>0.4096s</td>
<td>è‹¹æœå†…ç½®</td>
</tr>
<tr>
<td>164  * 100</td>
<td>ç¬¬ä¸‰æ¬¡</td>
<td>0.4152s</td>
<td>è‹¹æœå†…ç½®</td>
</tr>
<tr>
<td>2693 * 100</td>
<td>ç¬¬ä¸€æ¬¡</td>
<td>1.9244s</td>
<td>pinyin4obj</td>
</tr>
<tr>
<td>2693 * 100</td>
<td>ç¬¬äºŒæ¬¡</td>
<td>1.7063s</td>
<td>pinyin4obj</td>
</tr>
<tr>
<td>2693 * 100</td>
<td>ç¬¬ä¸‰æ¬¡</td>
<td>1.6897s</td>
<td>pinyin4obj</td>
</tr>
<tr>
<td>164  * 100</td>
<td>ç¬¬ä¸€æ¬¡</td>
<td>0.2228s</td>
<td>pinyin4obj</td>
</tr>
<tr>
<td>164  * 100</td>
<td>ç¬¬äºŒæ¬¡</td>
<td>0.1340s</td>
<td>pinyin4obj</td>
</tr>
<tr>
<td>164  * 100</td>
<td>ç¬¬ä¸‰æ¬¡</td>
<td>0.1017s</td>
<td>pinyin4obj</td>
</tr>
</tbody>
</table>
<p>ä»æµ‹è¯•æ•°æ®å¯ä»¥çœ‹å‡ºï¼Œè‹¹æœå†…ç½®è½¬æ¢è¦æ¯”pinyin4objcè€—æ—¶å¤š3-5å€ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹å½“ä¸­ï¼Œè¦å°½é‡è€ƒè™‘å‡ºæ•°æ®é‡çš„å¤§å°ï¼Œé€‰æ‹©è‡ªå·±éœ€è¦çš„è§£å†³åŠæ³•ã€‚</p>
<h3 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h3><p>è®°å¾—æ›¾ä»Šåœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿‡ä¸¤æ¬¡æ±‰å­—è½¬æ‹¼éŸ³çš„åŠŸèƒ½ï¼Œä¸€æ¬¡æ˜¯æ•°æ®é‡ç‰¹åˆ«å°‘ï¼Œå› æ­¤åœ¨ä½¿ç”¨è¿‡ç¨‹å½“ä¸­å®Œå…¨ä¸çŸ¥é“è€—æ—¶çš„äº‹æƒ…ã€‚æ¥ä¸‹æ¥å°±æ˜¯ç°åœ¨è¿™ä¸ªé¡¹ç›®ï¼Œæµ‹è¯•æŠ¥äº†ä¸€ä¸ªbugè¯´å¤§æ¦‚åŠåˆ†é’Ÿæ‰ä¼šå‡ºç°æ•°æ®ï¼Œå½“æ—¶ä¹Ÿä¸æ¸…æ¥šæ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œæœ€åè¯¦æŸ¥äº†ä¸€ä¸‹ï¼Œå®šä½æ˜¯æ±‰å­—è½¬æ‹¼éŸ³çš„é—®é¢˜ã€‚çœŸæ˜¯å´©æºƒå•Šï¼Œå½“æ—¶çš„è§£å†³æ–¹æ¡ˆæ˜¯æš‚æ—¶ä¸ä½¿ç”¨æ±‰å­—è½¬æ‹¼éŸ³ï¼Œå¿½ç•¥æ‰è€—æ—¶çš„è¯·æ±‚äº†ã€‚æœ€è¿‘ï¼Œå› ä¸ºéœ€è¦åšæœ¬åœ°æœç´¢ï¼Œæ‰€ä»¥å¾ˆå¤šæ•°æ®éœ€è¦ï¼Œå°±ä»æ–°è°ƒç ”äº†ä¸€ä¸‹æ±‰å­—è½¬æ‹¼éŸ³çš„åº“ã€‚</p>
<p>æ€»ä½“æ¥è®²ï¼Œpinyin4objcçš„æ€§èƒ½è¿˜æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œè½¬èŠ±æ•ˆç‡è¿˜æ˜¯è›®é«˜çš„ã€‚è‡³äºå ç”¨çš„å†…å­˜ï¼Œç®—ç®—ä¹Ÿè¿˜å¯ä»¥æ¥å—ã€‚å› æ­¤ï¼Œè¿˜æ˜¯è›®æ¨èå¤§å®¶ä½¿ç”¨çš„ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/19/SDWebImageä¹‹SDWebImageDownloaderç›¸å…³/" itemprop="url">
                  SDWebImageä¹‹SDWebImageDownloaderç›¸å…³
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-07-19T00:55:29+08:00" content="2016-07-19">
              2016-07-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/æºç å‰–æ/" itemprop="url" rel="index">
                    <span itemprop="name">æºç å‰–æ</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/19/SDWebImageä¹‹SDWebImageDownloaderç›¸å…³/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/19/SDWebImageä¹‹SDWebImageDownloaderç›¸å…³/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/19/SDWebImageæºç ä¹‹SDImageCache/" itemprop="url">
                  SDWebImageæºç ä¹‹SDImageCache
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-07-19T00:36:26+08:00" content="2016-07-19">
              2016-07-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/æºç å‰–æ/" itemprop="url" rel="index">
                    <span itemprop="name">æºç å‰–æ</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/19/SDWebImageæºç ä¹‹SDImageCache/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/19/SDWebImageæºç ä¹‹SDImageCache/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>SDImageCacheç±»æ˜¯å®ç°å›¾ç‰‡ç¼“å­˜çš„ç±»ï¼Œæ­¤ç±»çš„ç¼“å­˜åˆ†ä¸ºä¸¤ç§ï¼šç£ç›˜ç¼“å­˜ã€ä¿ç•™åœ¨å†…å­˜ã€‚é€šä¿—çš„è¯´å°±æ˜¯å‰è€…ä¿å­˜åœ¨æ²™ç›’ï¼Œåè€…åœç•™åœ¨å†…å­˜ä¸­ã€‚é—®é¢˜åœ¨äºï¼Œæ²™ç›’è¯»å†™æ¯”è¾ƒè€—æ—¶ï¼Œä¿å­˜åœ¨å†…å­˜ä¸­æ¯”è¾ƒå å†…å­˜ï¼Œå¯èƒ½å­˜åœ¨å› å†…å­˜è¿‡å¤§è€Œå´©æºƒã€‚å¯¹äºæ²™ç›’è¯»å†™è€—æ—¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å¤§ï¼Œæ‰‹æœºè¯»å†™é€Ÿåº¦å¿«ï¼Œé‚£ä¹Ÿæ˜¯æ¯«å˜ä¹‹é—´çš„æ—¶é—´å°±èƒ½å®Œæˆçš„ã€‚å†…å­˜å æœ‰ç‡å¤§ï¼Œè¿™ä¸ªè‹¹æœçš„NSCacheå°±ç»™æˆ‘ä»¬æä¾›äº†ç›¸åº”çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½å†…å­˜å æœ‰ç‡å’Œé˜²æ­¢åº”ç”¨å´©æºƒï¼Œå…³äºNSCacheå¯ä»¥çœ‹å¦å¤–ä¸€ç¯‡æ–‡ç« <a href="http://blog.ysenin.com/2016/07/17/NSCache%E7%9B%B8%E5%85%B3%E8%A7%A3%E8%AF%BB/" target="_blank" rel="external">NSCacheç›¸å…³è§£è¯»</a>ã€‚</p>
<h3 id="ç¼“å­˜ç±»å‹"><a href="#ç¼“å­˜ç±»å‹" class="headerlink" title="ç¼“å­˜ç±»å‹"></a>ç¼“å­˜ç±»å‹</h3><p>SDImageCacheæä¾›äº†ä¸‰ç§æšä¸¾ç±»å‹ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// è¯»å–ç¼“å­˜æšä¸¾ç±»å‹</span><br><span class="line">typedef NS_ENUM(NSInteger, SDImageCacheType) &#123;</span><br><span class="line">    SDImageCacheTypeNone, // imageä¸å¯ç”¨äºSDWebImageç¼“å­˜ï¼Œä½†å¯ä»¥ä»ç½‘ç»œä¸‹è½½</span><br><span class="line">    SDImageCacheTypeDisk, // å›¾ç‰‡å¯ä»¥ä»ç£ç›˜ç¼“å­˜ç©ºé—´è·å–</span><br><span class="line">    SDImageCacheTypeMemory // å›¾ç‰‡ä»å†…å­˜ç©ºé—´è·å–</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>å¦‚ä¸Šï¼Œæˆ‘ä»¬è¯»å–ç¼“å­˜çš„æ—¶å€™ï¼Œå¯ä»¥ä»ç½‘ç»œä¸Šä¸‹è½½ï¼Œä»ç£ç›˜è¯»åŒºï¼Œä¹Ÿå¯ä»¥ä»å†…å­˜ç©ºé—´è·å¾—ã€‚å½“ç„¶ï¼Œå…·ä½“æ˜¯æ€æ ·å®ç°ç”±å…·ä½“çš„æŠ€æœ¯å®ç°æ¥å®Œæˆã€‚</p>
<h3 id="Block"><a href="#Block" class="headerlink" title="Block"></a>Block</h3><p>åœ¨SDImageCacheä¸­ï¼Œç»™æˆ‘ä»¬æä¾›äº†ä¸‰ä¸ªblock<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// é€šè¿‡keyæŸ¥è¯¢ï¼Œç¼“å­˜ï¼ˆå†…å­˜å’Œç£ç›˜ï¼‰æ˜¯å¦å­˜åœ¨ç¼“å­˜ï¼Œå¹¶è¿”å›å›¾ç‰‡æ•°æ®å’Œç¼“å­˜æ¥æº</span><br><span class="line">typedef void(^SDWebImageQueryCompletedBlock)(UIImage *image, SDImageCacheType cacheType);</span><br><span class="line"></span><br><span class="line">// æ£€æŸ¥keyæ˜¯å¦å­˜åœ¨ç£ç›˜ç¼“å­˜ä¸­</span><br><span class="line">typedef void(^SDWebImageCheckCacheCompletionBlock)(BOOL isInCache);</span><br><span class="line"></span><br><span class="line">// è®¡ç®—ç£ç›˜ç¼“å­˜å¤§å°ï¼Œè¿”å›ç£ç›˜ç¼“å­˜æ•°ç›®å’Œæ€»å¤§å°</span><br><span class="line">typedef void(^SDWebImageCalculateSizeBlock)(NSUInteger fileCount, NSUInteger totalSize);</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æ³¨é‡Šæ‰€ç¤ºï¼Œå‰ä¸¤ä¸ªblockæŸ¥è¯¢keyçš„ç¼“å­˜æ•°æ®ï¼Œç¬¬ä¸‰ä¸ªblockæ˜¯è®¡ç®—ç£ç›˜ç¼“å­˜å¤§å°ã€‚è¿™å‡ ä¸ªblockåœ¨åé¢çš„ä»£ç å®ç°ä¸­æœ‰å¾ˆé‡è¦çš„ä½œç”¨ï¼Œå› æ­¤æˆ‘ä»¬åšä¸€ä¸ªé‡è¦äº†è§£ã€‚</p>
<h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ­¤å±æ€§ä¸»è¦ç”¨äºgifå›¾ç‰‡ç±»ï¼Œè§£å‹è¢«ä¸‹è½½å¹¶ç¼“å­˜çš„å›¾ç‰‡å¯ä»¥æé«˜æ€§èƒ½ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—å¾ˆå¤šå†…å­˜ï¼Œé»˜è®¤ä¸ºyesï¼Œå¦‚æœé‡åˆ°å› ä¸ºå†…å­˜æ¶ˆè€—è¿‡å¤§è€Œå¯¼è‡´å´©æºƒï¼Œå¯ä»¥è®¾ç½®ä¸ºno</span><br><span class="line"> */</span><br><span class="line">@property (assign, nonatomic) BOOL shouldDecompressImages;</span><br><span class="line"></span><br><span class="line">// å…è®¸iCloudå¤‡ä»½ï¼Œé»˜è®¤ä¸ºyes</span><br><span class="line">@property (assign, nonatomic) BOOL shouldDisableiCloud;</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨å†…å­˜ç¼“å­˜ï¼Œé»˜è®¤yes</span><br><span class="line">@property (assign, nonatomic) BOOL shouldCacheImagesInMemory;</span><br><span class="line"></span><br><span class="line">// å†…å­˜ä¸­å›¾ç‰‡æœ€å¤§çš„ç¼“å­˜èŠ±è´¹ï¼ˆæœ€å¤§ç¼“å­˜å®¹é‡ï¼‰ï¼ŒèŠ±è´¹çš„æ–¹æ³•æ˜¯ä¿ç•™åœ¨å†…å­˜ä¸­çš„åƒç´ ä¸ªæ•°</span><br><span class="line">@property (assign, nonatomic) NSUInteger maxMemoryCost;</span><br><span class="line"></span><br><span class="line">// æœ€å¤§å¯ä»¥ç¼“å­˜çš„å›¾ç‰‡å¯¹è±¡</span><br><span class="line">@property (assign, nonatomic) NSUInteger maxMemoryCountLimit;</span><br><span class="line"></span><br><span class="line">// å›¾ç‰‡æœ€é•¿ç¼“å­˜æ—¶é—´</span><br><span class="line">@property (assign, nonatomic) NSInteger maxCacheAge;</span><br><span class="line"></span><br><span class="line">// æœ€å¤§æ¯”ç‰¹ç¼“å­˜</span><br><span class="line">@property (assign, nonatomic) NSUInteger maxCacheSize;</span><br></pre></td></tr></table></figure>
<p>å…³äºå±æ€§ï¼Œäº‹å®ä¸Šå’ŒNSCacheçš„å±æ€§å·®ä¸å¤šã€‚è¿™é‡Œéœ€è¦è¯´ä¸€ä¸‹<strong>maxCacheAge</strong>çš„å®ç°æ–¹å¼ã€‚maxCacheAgeå¦‚æ³¨é‡Šæ‰€ç¤ºï¼Œä»£è¡¨æœ€é•¿çš„ç¼“å­˜æ—¶é—´ï¼Œè¿™é‡Œä»…ä»…æ˜¯é’ˆå¯¹äºç£ç›˜ç¼“å­˜è€Œè¨€ã€‚maxCacheAgeä»…ä»…æ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ—¶é—´ï¼Œå¹¶ä¸æ˜¯ç»å¯¹çš„ã€‚ä»æºç å¯ä»¥çœ‹å‡ºï¼Œç£ç›˜ç¼“å­˜æ¸…ç†ä¼šåˆ°ç”¨åˆ°<strong>- (void)cleanDiskWithCompletionBlock:(SDWebImageNoParamsBlock)completionBlock</strong>æ–¹æ³•ï¼Œåœ¨æ­¤æ–¹æ³•ï¼Œç³»ç»Ÿä¼šå»æ£€ç´¢ç£ç›˜ï¼Œæ˜¯å¦å­˜åœ¨ç¼“å­˜æ–‡ä»¶ï¼Œå¹¶è¯»å‡ºå¯ç”¨è·¯å¾„ã€‚ä¹‹åé€šè¿‡æ–‡ä»¶æœ€åä¿®æ”¹çš„æ—¶é—´ï¼Œå’Œç¦»ç°åœ¨maxCacheAgeä¹‹å‰çš„æ—¶é—´èŠ‚ç‚¹æ—¶é—´ç›¸äº’æ¯”è¾ƒï¼Œåˆ¤æ–­æ˜¯å¦åº”è¯¥åˆ é™¤ã€‚é‚£ä¹ˆ<strong>é‡ç‚¹</strong>åœ¨äºï¼Œåœ¨ä»€ä¹ˆåœ°æ–¹ä¼šè°ƒç”¨æ­¤æ–¹æ³•å‘¢ï¼Ÿè¿˜æ˜¯å›åˆ°æºç ï¼Œå¦‚ä¸‹ä»£ç å¯ä»¥å‘ç°é—®é¢˜ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">- (id)initWithNamespace:(NSString *)ns diskCacheDirectory:(NSString *)directory &#123;</span><br><span class="line">    if ((self = [super init])) &#123;</span><br><span class="line">        /* å„ç§åˆå§‹åŒ– */</span><br><span class="line">        // ç¨‹åºå—åˆ°å†…å­˜è­¦å‘Šï¼Œéœ€è¦è¿›è¡Œå†…å­˜ç¼“å­˜æ¸…ç†</span><br><span class="line">        [[NSNotificationCenter defaultCenter] addObserver:self</span><br><span class="line">                                                 selector:@selector(clearMemory)</span><br><span class="line">                                                     name:UIApplicationDidReceiveMemoryWarningNotification</span><br><span class="line">                                                   object:nil];</span><br><span class="line"></span><br><span class="line">        // ç¨‹åºå³å°†è¢«ç»ˆæ­¢ï¼ˆè¢«æ€æ­»ï¼‰,æ¸…ç†ç£ç›˜ç¼“å­˜</span><br><span class="line">        [[NSNotificationCenter defaultCenter] addObserver:self</span><br><span class="line">                                                 selector:@selector(cleanDisk)</span><br><span class="line">                                                     name:UIApplicationWillTerminateNotification</span><br><span class="line">                                                   object:nil];</span><br><span class="line"></span><br><span class="line">        // ç¨‹åºè¿›å…¥åå°åï¼Œéœ€è¦æ¸…ç†çš„ç£ç›˜ç¼“å­˜</span><br><span class="line">        [[NSNotificationCenter defaultCenter] addObserver:self</span><br><span class="line">                                                 selector:@selector(backgroundCleanDisk)</span><br><span class="line">                                                     name:UIApplicationDidEnterBackgroundNotification</span><br><span class="line">                                                   object:nil];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä»ä¸Šé¢ä»£ç ï¼Œæˆ‘ä»¬åœ¨æ–°å»ºç¼“å­˜ç±»çš„æ—¶å€™æ³¨å†Œäº†ä¸‰ä¸ªç›‘å¬äº‹ä»¶ã€‚ä»åé¢ä¸¤ä¸ªç›‘å¬æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¨‹åºåœ¨å³å°†è¢«ç»ˆæ­¢æ˜¯ä¼šè°ƒç”¨ä¸€æ¬¡ç£ç›˜æ¸…ç†ï¼Œåœ¨ç¨‹åºè¿›å…¥åå°éœ€è¦æ¸…ç†ä¸€æ¬¡ã€‚å‡å¦‚ç¨‹åºé•¿æ—¶é—´ç•™åœ¨å‰å°ï¼Œä¸”ä¸è¢«æ€æ­»ï¼Œè¶…è¿‡äº†maxCacheAgeæ—¶é—´ï¼Œç¼“å­˜ç£ç›˜æ–‡ä»¶è¿˜æ˜¯å¯èƒ½å­˜åœ¨äºç£ç›˜çš„ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºå•¥ï¼Œè¯´ç£ç›˜maxCacheAgeæ˜¯ç›¸å¯¹çš„ã€‚</p>
<h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><p>é’ˆå¯¹SDImageCacheçš„æ–¹æ³•ï¼Œè¿™é‡Œåªä¼šç»™å‡ºå‡ ä¸ªé‡è¦çš„æ–¹æ³•å®ç°ï¼Œå› ä¸ºå…¶å®ƒéƒ½æ˜¯é’ˆå¯¹äºè¿™å‡ ä¸ªæ–¹æ³•ï¼Œé€šè¿‡ä¸åŒçš„å‚æ•°å½¢æˆçš„ã€‚é¦–å…ˆç¼“å­˜å¾ˆé‡è¦çš„ä¸€ä¸ªä¸œè¥¿å°±æ˜¯keyï¼Œè¿™ä¸ªå°±æ˜¯å›¾ç‰‡çš„urlï¼Œç”±äºç›´æ¥å­˜å‚¨urlä¸æ˜¯ç‰¹åˆ«èªæ˜çš„åŠæ³•ï¼Œå› æ­¤ä½œè€…å°†urlè½¬æ¢æˆäº†md5ç¼–ç ï¼Œå–å…¶16è¿›åˆ¶çš„ç¼–ç ä½œä¸ºæœ€ç»ˆçš„keyã€‚ç„¶åï¼Œç£ç›˜ç¼“å­˜ä¸€èˆ¬éƒ½æ˜¯å¼‚æ­¥è¯»å†™ã€‚</p>
<h4 id="ç£ç›˜å­˜å‚¨"><a href="#ç£ç›˜å­˜å‚¨" class="headerlink" title="ç£ç›˜å­˜å‚¨"></a>ç£ç›˜å­˜å‚¨</h4><p>ç£ç›˜å­˜å‚¨éƒ½ä¼šç»Ÿä¸€è°ƒç”¨ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•çš„ä»£ç ï¼Œå…·ä½“çš„å¯ä»¥ç»“åˆæºä»£ç å’Œæ³¨é‡Šæ¥çœ‹ï¼Œè¿™ä¼šè®©ä½ åœ¨è¯»ä»£ç æ—¶äº‹åŠåŠŸå€ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">// ç¼“å­˜å›¾ç‰‡ï¼ˆimageï¼Œæ˜¯å¦ä»æ–°è®¡ç®—ï¼Œå›¾ç‰‡æ•°æ®ï¼Œkeyï¼Œæ˜¯å¦ç£ç›˜ç¼“å­˜ï¼‰</span><br><span class="line">- (void)storeImage:(UIImage *)image recalculateFromImage:(BOOL)recalculate imageData:(NSData *)imageData forKey:(NSString *)key toDisk:(BOOL)toDisk &#123;</span><br><span class="line">    if (!image || !key) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    // å¦‚æœå…è®¸å†…å­˜ç¼“å­˜</span><br><span class="line">    if (self.shouldCacheImagesInMemory) &#123; // å†…å­˜ç¼“å­˜</span><br><span class="line">        NSUInteger cost = SDCacheCostForImage(image);</span><br><span class="line">        [self.memCache setObject:image forKey:key cost:cost]; // è·³è‡³å†…å­˜ç¼“å­˜çš„æ–¹æ³•</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (toDisk) &#123; // è¿›è¡Œå¼‚æ­¥ç£ç›˜ç¼“å­˜</span><br><span class="line">        dispatch_async(self.ioQueue, ^&#123;</span><br><span class="line">            NSData *data = imageData;</span><br><span class="line"></span><br><span class="line">            if (image &amp;&amp; (recalculate || !data)) &#123;</span><br><span class="line">#if TARGET_OS_IPHONE // æ˜¯å¦æ˜¯iOSå¹³å°</span><br><span class="line">                </span><br><span class="line">                int alphaInfo = CGImageGetAlphaInfo(image.CGImage); // è·å–å›¾ç‰‡çš„é€šé“ä¿¡æ¯</span><br><span class="line">                BOOL hasAlpha = !(alphaInfo == kCGImageAlphaNone ||</span><br><span class="line">                                  alphaInfo == kCGImageAlphaNoneSkipFirst ||</span><br><span class="line">                                  alphaInfo == kCGImageAlphaNoneSkipLast);</span><br><span class="line">                BOOL imageIsPng = hasAlpha; // æ˜¯å¦æœ‰alphaé€šé“</span><br><span class="line"></span><br><span class="line">                // But if we have an image data, we will look at the preffix</span><br><span class="line">                if ([imageData length] &gt;= [kPNGSignatureData length]) &#123; // åˆ¤æ–­æ•°æ®çš„å‰8ä¸ªå­—èŠ‚ï¼Œä»¥ç¡®å®šä½¿ç”¨å“ªç§è½¬æ¢æ–¹å¼</span><br><span class="line">                    imageIsPng = ImageDataHasPNGPreffix(imageData);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (imageIsPng) &#123; // png æ ¼å¼</span><br><span class="line">                    data = UIImagePNGRepresentation(image);</span><br><span class="line">                &#125;</span><br><span class="line">                else &#123;</span><br><span class="line">                    data = UIImageJPEGRepresentation(image, (CGFloat)1.0);</span><br><span class="line">                &#125;</span><br><span class="line">#else</span><br><span class="line">                data = [NSBitmapImageRep representationOfImageRepsInArray:image.representations usingType: NSJPEGFileType properties:nil];</span><br><span class="line">#endif</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            [self storeImageDataToDisk:data forKey:key]; // é€šè¿‡keyè¿›è¡Œç£ç›˜ç¼“å­˜</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç£ç›˜ç¼“å­˜ï¼Œé€šè¿‡key</span><br><span class="line">- (void)storeImageDataToDisk:(NSData *)imageData forKey:(NSString *)key &#123;</span><br><span class="line">    </span><br><span class="line">    if (!imageData) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // åˆ¤æ–­ç£ç›˜ç¼“å­˜è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™åˆ›å»ºç£ç›˜ç¼“å­˜è·¯å¾„</span><br><span class="line">    if (![_fileManager fileExistsAtPath:_diskCachePath]) &#123;</span><br><span class="line">        [_fileManager createDirectoryAtPath:_diskCachePath withIntermediateDirectories:YES attributes:nil error:NULL];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // get cache Path for image key</span><br><span class="line">    // ç¼“å­˜æ–‡ä»¶è·¯å¾„</span><br><span class="line">    NSString *cachePathForKey = [self defaultCachePathForKey:key]; // md5ä¹‹åçš„url</span><br><span class="line">    // transform to NSUrl</span><br><span class="line">    // è½¬æ¢æˆnsurl</span><br><span class="line">    NSURL *fileURL = [NSURL fileURLWithPath:cachePathForKey];</span><br><span class="line">    </span><br><span class="line">    // åˆ›å»ºç¼“å­˜æ–‡ä»¶</span><br><span class="line">    [_fileManager createFileAtPath:cachePathForKey contents:imageData attributes:nil];</span><br><span class="line">    </span><br><span class="line">    // disable iCloud backup</span><br><span class="line">    // å¯ç”¨iCloudå¤‡ä»½</span><br><span class="line">    if (self.shouldDisableiCloud) &#123;</span><br><span class="line">        [fileURL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:nil];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="ç£ç›˜æŸ¥æ‰¾"><a href="#ç£ç›˜æŸ¥æ‰¾" class="headerlink" title="ç£ç›˜æŸ¥æ‰¾"></a>ç£ç›˜æŸ¥æ‰¾</h4><p>ç£ç›˜æŸ¥æ‰¾éœ€è¦æ³¨æ„ä¸€ç‚¹çš„å°±æ˜¯ï¼Œåœ¨æ–‡ä»¶å­˜å‚¨çš„æ—¶å€™ï¼Œå¯èƒ½å­˜åœ¨æ²¡æœ‰åç¼€æ‰©å±•åçš„å­˜åœ¨ï¼Œå› æ­¤éœ€è¦æ£€æŸ¥ä¸¤æ¬¡ï¼Œä¾æ¬¡æ˜¯å­˜åœ¨æ‰©å±•åï¼Œä¸€æ¬¡æ˜¯ä¸å­˜åœ¨æ‰©å±•åã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// åˆ¤æ–­ç£ç›˜æ–‡ä»¶æ˜¯å¦å­˜åœ¨keyçš„ç¼“å­˜æ–‡ä»¶</span><br><span class="line">- (BOOL)diskImageExistsWithKey:(NSString *)key &#123;</span><br><span class="line">    BOOL exists = NO;</span><br><span class="line">    </span><br><span class="line">    // è¿™æ˜¯æœŸæœ›é€šè¿‡è¿æ¥æ–‡ä»¶ç®¡ç†åœ¨å…¶ä»–çš„ioé˜Ÿåˆ—ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†å•ä¾‹,æ¥è‡ªè‹¹æœå®˜æ–¹æ–‡æ¡£çš„è§£é‡Šæ˜¯ï¼šæ–‡ä»¶ç®¡ç†çš„å•ä¾‹å¯¹è±¡æ–¹æ³•ï¼Œåœ¨å¤šçº¿ç¨‹èƒ½å®‰å…¨çš„è°ƒç”¨ã€‚</span><br><span class="line">    </span><br><span class="line">    // é€šè¿‡keyè·å–ç¼“å­˜æ–‡ä»¶è·¯å¾„</span><br><span class="line">    exists = [[NSFileManager defaultManager] fileExistsAtPath:[self defaultCachePathForKey:key]];</span><br><span class="line"></span><br><span class="line">    // æ ¹æ®https://github.com/rs/SDWebImage/pull/976ï¼Œå¯èƒ½keyæ·»åŠ äº†åç¼€æ‰©å±•å,å› æ­¤éœ€è¦åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨åç¼€æ‰©å±•å</span><br><span class="line">    if (!exists) &#123;</span><br><span class="line">        // keyå­˜åœ¨åç¼€ï¼Œéœ€è¦åˆ é™¤æ‰©å±•åï¼Œåªä¿ç•™æ–‡ä»¶å</span><br><span class="line">        exists = [[NSFileManager defaultManager] fileExistsAtPath:[[self defaultCachePathForKey:key] stringByDeletingPathExtension]];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return exists;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ–¹æ³•ä½œç”¨åŒä¸Šï¼Œåªæ˜¯å®ç°äº†å¼‚æ­¥åˆ¤æ–­ï¼Œæ·»åŠ å›è°ƒblock</span><br><span class="line">- (void)diskImageExistsWithKey:(NSString *)key completion:(SDWebImageCheckCacheCompletionBlock)completionBlock &#123;</span><br><span class="line">    dispatch_async(_ioQueue, ^&#123;</span><br><span class="line">        BOOL exists = [_fileManager fileExistsAtPath:[self defaultCachePathForKey:key]];</span><br><span class="line"></span><br><span class="line">        if (!exists) &#123;</span><br><span class="line">            exists = [_fileManager fileExistsAtPath:[[self defaultCachePathForKey:key] stringByDeletingPathExtension]];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // å¼‚æ­¥ç»“æŸï¼Œæ‰§è¡Œå›è°ƒ</span><br><span class="line">        if (completionBlock) &#123;</span><br><span class="line">            dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                completionBlock(exists);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="ç£ç›˜åˆ é™¤"><a href="#ç£ç›˜åˆ é™¤" class="headerlink" title="ç£ç›˜åˆ é™¤"></a>ç£ç›˜åˆ é™¤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">- (void)removeImageForKey:(NSString *)key fromDisk:(BOOL)fromDisk withCompletion:(SDWebImageNoParamsBlock)completion &#123;</span><br><span class="line">    </span><br><span class="line">    if (key == nil) &#123;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ä»å†…å­˜åˆ é™¤gifæ•°æ®</span><br><span class="line">    if (self.shouldCacheImagesInMemory) &#123;</span><br><span class="line">        [self.memCache removeObjectForKey:key];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (fromDisk) &#123;</span><br><span class="line">        dispatch_async(self.ioQueue, ^&#123; // å¼‚æ­¥é˜Ÿåˆ—</span><br><span class="line">            // åˆ é™¤è·¯å¾„ä¸‹çš„æ•°æ®</span><br><span class="line">            [_fileManager removeItemAtPath:[self defaultCachePathForKey:key] error:nil];</span><br><span class="line">            </span><br><span class="line">            if (completion) &#123;</span><br><span class="line">                dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                    completion();</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; else if (completion)&#123;</span><br><span class="line">        completion();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å†…å­˜ç¼“å­˜"><a href="#å†…å­˜ç¼“å­˜" class="headerlink" title="å†…å­˜ç¼“å­˜"></a>å†…å­˜ç¼“å­˜</h4><p>SDImageCacheä¸¤ç§ç¼“å­˜æ–¹å¼ï¼šç£ç›˜ç¼“å­˜ã€å†…å­˜ç¼“å­˜ã€‚ä¸Šé¢ä»‹ç»äº†ç£ç›˜ç¼“å­˜çš„ä¸€äº›è¯»å†™çš„é‡è¦æ–¹æ³•ï¼Œé‚£ä¹ˆå†…å­˜ç¼“å­˜SDImageCacheåˆ™æ˜¯ä½¿ç”¨äº†NSCacheçš„æ–¹å¼å»å®Œæˆçš„ã€‚å› æ­¤ï¼Œå¦‚æœæƒ³å­¦ä¹ NSCacheå¯ä»¥çœ‹æˆ‘å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç™¾åº¦ï¼Œé‚£ä¸€å—å„¿å°±ä¸å†æ·±å…¥æ¢ç©¶äº†ã€‚</p>
<h3 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h3><p>è‡³æ­¤ï¼Œå…³äºSDImageCacheçš„è®²è§£å°±åˆ°æ­¤ç»“æŸäº†ã€‚ä¸Šé¢å­˜åœ¨çš„æºç æ¯”è¾ƒå¤šï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€å®šçš„æ–‡å­—æè¿°ã€‚é‡Œé¢æåˆ°äº†ä¸€äº›é‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œè¿˜æœ›ç»†ç»†å“å°ï¼Œå¦‚æœæœ‰å•¥é—®é¢˜å¯ä»¥ç•™è¨€ç»™æˆ‘ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/17/NSCacheç›¸å…³è§£è¯»/" itemprop="url">
                  NSCacheç›¸å…³è§£è¯»
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-07-17T01:47:52+08:00" content="2016-07-17">
              2016-07-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Foundation/" itemprop="url" rel="index">
                    <span itemprop="name">Foundation</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/17/NSCacheç›¸å…³è§£è¯»/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/17/NSCacheç›¸å…³è§£è¯»/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>è¯´å®è¯ï¼Œæœ€è¿‘åœ¨çœ‹SDWebImageï¼Œé‡Œé¢å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†å°±æ˜¯è®²ç¼“å­˜è¿™ä¸ªçŸ¥è¯†ç‚¹ã€‚é‚£ä¹ˆï¼Œå†™è¿™ç¯‡æ–‡ç« çš„å‰åŠä¸ªå°æ—¶ï¼Œæ˜¯å‡†å¤‡å†™SDWebImageçš„æºç åˆ†æçš„ã€‚ä½†å› ä¸ºå¼ºè¿«ç—‡ï¼Œè§‰å¾—éœ€è¦è®²æ¸…æ¥šç¼“å­˜ç›¸å…³çš„æ¦‚å¿µï¼Œæ‰èƒ½ç»§ç»­å¾€ä¸‹è®²SDWebImageã€‚å› æ­¤ï¼Œè¿™ç¯‡æ–‡ç« ï¼Œä¸»è¦è®²NSCacheç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œä»¥åŠå…¶ä»–æ–¹å¼æ„å»ºç¼“å­˜çš„ä¼˜ç¼ºç‚¹ã€‚</p>
<h3 id="NSCacheä»‹ç»ä¸åŸºæœ¬ä½¿ç”¨"><a href="#NSCacheä»‹ç»ä¸åŸºæœ¬ä½¿ç”¨" class="headerlink" title="NSCacheä»‹ç»ä¸åŸºæœ¬ä½¿ç”¨"></a>NSCacheä»‹ç»ä¸åŸºæœ¬ä½¿ç”¨</h3><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ç¼“å­˜ç®¡ç†ç±»ï¼Œä»¥key-valueå¯¹çš„å½¢å¼è¿›è¡Œå­˜å‚¨ã€‚æ˜¯ä¸æ˜¯æ„Ÿè§‰å’ŒNSMutableDictionaryéå¸¸ç›¸ä¼¼å‘¢ï¼Ÿæ²¡é”™ï¼Œåœ¨iOS 4ä¹‹å‰ï¼Œè‹¹æœå°±æ˜¯ä»¥NSMutableDictionaryçš„å½¢åŠ¿åšç¼“å­˜çš„ï¼Œè‡³äºä¸¤è€…çš„åŒºåˆ«ä¼šåœ¨æ¥ä¸‹æ¥çš„æ–‡ç« é‡Œæåˆ°ã€‚åœ¨é¡¹ç›®ä¸­ï¼Œæ–°å»ºä¸€ä¸ªNSCacheå¯¹è±¡ï¼Œç‚¹å‡»è¿›å…¥NSCacheç±»ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°NSCacheç»™æˆ‘ä»¬æä¾›çš„å‡ ä¸ªç®€å•çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<h4 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h4><blockquote>
<p>@property (copy) NSString *name; // åç§°<br>@property (nullable, assign) id<nscachedelegate> delegate; // ä»£ç†<br>@property NSUInteger totalCostLimit;    // æœ€å¤§ç¼“å­˜å®¹é‡ä¸Šé™<br>@property NSUInteger countLimit;    // æœ€å¤§ç¼“å­˜å®¹é‡å¯¹è±¡ä¸ªæ•°<br>@property BOOL evictsObjectsWithDiscardedContent; // æ˜¯å¦å…è®¸é€€å‡ºå¯¹è±¡ä¸¢å¼ƒç¼“å­˜å†…å®¹</nscachedelegate></p>
</blockquote>
<p>è¿™é‡Œéœ€è¦é‡ç‚¹è®²çš„åªæœ‰totalCostLimitå’ŒcountLimitä¸¤ä¸ªå±æ€§ï¼Œå¦‚æ³¨é‡Šæ‰€çœ‹åˆ°çš„ï¼Œä¸€ä¸ªæ˜¯æœ€å¤§ç¼“å­˜å®¹é‡ä¸Šé™å’Œæœ€å¤§ç¼“å­˜å¯¹è±¡ä¸ªæ•°ã€‚</p>
<blockquote>
<p>  1.totalCostLimitï¼šé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºæ²¡æœ‰æœ€å¤§çš„ç¼“å­˜ä¸Šé™ï¼›å½“ä¸ä¸º0æ—¶ï¼Œæˆ‘ä»¬åœ¨æ·»åŠ çš„ç¼“å­˜æ•°æ®è¶…è¿‡totalCostLimitï¼ŒNSCacheä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªç¼“å­˜å¯¹è±¡ï¼Œä»¥ä¿è¯æˆ‘ä»¬æ·»åŠ ç¼“å­˜æ•°æ®ä¹‹åçš„å¤§å°ä¸ä¼šè¶…è¿‡æœ€å¤§çš„ç¼“å­˜å®¹é‡ã€‚<br>  2.countLimit: é»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºæ²¡æœ‰æœ€å¤§çš„ç¼“å­˜ä¸Šé™ä¸ªæ•°ï¼›å½“ä¸ä¸º0æ—¶ï¼Œæˆ‘ä»¬é€ä¸ªæ·»åŠ ç¼“å­˜æ—¶ï¼Œä¼šè®¡ç®—æ˜¯å¦è¶…è¿‡æœ€å¤§çš„ç¼“å­˜æ•°é‡ä¸ªæ•°ï¼Œè‹¥è¶…è¿‡åˆ™ä¼šè‡ªåŠ¨é‡Šæ”¾å…¶ä¸­ä¸€ä¸ªã€‚</p>
</blockquote>
<p>å½“ç„¶ï¼Œä¸Šé¢ä¸¤ä¸ªå±æ€§å¹¶ä¸æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„é™åˆ¶ã€‚å½“ç¼“å­˜æ•°æ®è¶…è¿‡é™åˆ¶æ—¶ï¼Œå¯èƒ½ä¼šç«‹å³ä¸¢å¼ƒã€ç¨åæˆ–è€…æ°¸ä¸ä¸¢å¼ƒï¼Œå…·ä½“çš„å¾—çœ‹å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</p>
<h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><p>NSCacheæä¾›äº†ä¸€ç»„æ–¹æ³•æ¥å­˜å–keyï¼valueå¯¹ï¼Œé€šè¿‡ä¸‹é¢çš„æ–¹æ³•å°±å¯ä»¥è®¾ç½®ç¼“å­˜æ•°æ®ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (nullable <span class="type">ObjectType</span>)objectForKey:(<span class="type">KeyType</span>)key; <span class="comment">// è·å–keyçš„ç¼“å­˜æ•°æ®</span></span><br><span class="line">- (void)setObject:(<span class="type">ObjectType</span>)obj forKey:(<span class="type">KeyType</span>)key; <span class="comment">// 0 cost, è®¾ç½®keyçš„ç¼“å­˜æ•°æ®ï¼Œé»˜è®¤ç¼“å­˜èŠ±è´¹ä¸º0</span></span><br><span class="line">- (void)setObject:(<span class="type">ObjectType</span>)obj forKey:(<span class="type">KeyType</span>)key cost:(<span class="type">NSUInteger</span>)g; <span class="comment">// åŒä¸Šï¼Œç¼“å­˜èŠ±è´¹ä¸ºg</span></span><br><span class="line">- (void)removeObjectForKey:(<span class="type">KeyType</span>)key; <span class="comment">// ç§»é™¤keyçš„ç¼“å­˜æ•°æ®</span></span><br><span class="line">- (void)removeAllObjects; <span class="comment">// ç§»é™¤æ‰€æœ‰ç¼“å­˜æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// delegate</span></span><br><span class="line">- (void)cache:(<span class="type">NSCache</span> *)cache willEvictObject:(id)obj; <span class="comment">// è¢«ç§»é™¤çš„ç¼“å­˜æ•°æ®å¯¹è±¡</span></span><br></pre></td></tr></table></figure></p>
<p>ç‰¹åˆ«éœ€è¦è¯´æ˜çš„ä¸¤ä¸ªæ–¹æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (void)setObject:(<span class="type">ObjectType</span>)obj forKey:(<span class="type">KeyType</span>)key; <span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line">- (void)setObject:(<span class="type">ObjectType</span>)obj forKey:(<span class="type">KeyType</span>)key cost:(<span class="type">NSUInteger</span>)g; <span class="comment">// æ–¹æ³•äºŒ</span></span><br></pre></td></tr></table></figure></p>
<p>æœ¬è´¨ä¸Šï¼Œä¸¤ä¸ªæ–¹æ³•çš„å®ç°æ˜¯ä¸€æ ·çš„ï¼Œæ–¹æ³•ä¸€çš„costé»˜è®¤ä¸º0ã€‚é‚£ä¹ˆcostæ—¶ç”¨æ¥å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿå‚è€ƒ<a href="http://southpeak.github.io/blog/2015/02/11/cocoa-foundation-nscache/" target="_blank" rel="external">å—å³°å­çš„æŠ€æœ¯åšå®¢</a>æœ‰å¦‚ä¸‹è¿™æ®µè¯ï¼š</p>
<blockquote>
<p>è¿™ä¸ªæ¶ˆè€—å€¼ç”¨äºè®¡ç®—ç¼“å­˜ä¸­æ‰€æœ‰å¯¹è±¡çš„ä¸€ä¸ªæ¶ˆè€—æ€»å’Œã€‚å½“å†…å­˜å—é™æˆ–è€…æ€»æ¶ˆè€—è¶…è¿‡äº†é™å®šçš„æœ€å¤§æ€»æ¶ˆè€—ï¼Œåˆ™ç¼“å­˜åº”è¯¥å¼€å¯ä¸€ä¸ªä¸¢å¼ƒè¿‡ç¨‹ä»¥ç§»é™¤ä¸€äº›å¯¹è±¡ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸èƒ½ä¿è¯è¢«ä¸¢å¼ƒå¯¹è±¡çš„é¡ºåºã€‚å…¶ç»“æœæ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¯•å›¾æ“ä½œè¿™ä¸ªæ¶ˆè€—å€¼æ¥å®ç°ä¸€äº›ç‰¹æ®Šçš„è¡Œä¸ºï¼Œåˆ™åæœå¯èƒ½ä¼šæŸå®³æˆ‘ä»¬çš„ç¨‹åºã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ¶ˆè€—å€¼æ˜¯å¯¹è±¡çš„å­—èŠ‚å¤§å°ã€‚å¦‚æœè¿™äº›ä¿¡æ¯ä¸æ˜¯ç°æˆçš„ï¼Œåˆ™æˆ‘ä»¬ä¸åº”è¯¥å»è®¡ç®—å®ƒï¼Œå› ä¸ºè¿™æ ·ä¼šä½¿å¢åŠ ä½¿ç”¨ç¼“å­˜çš„æˆæœ¬ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰å¯ç”¨çš„å€¼ä¼ é€’ï¼Œåˆ™ç›´æ¥ä¼ é€’0ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨-setObject:forKey:æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸éœ€è¦ä¼ å…¥ä¸€ä¸ªæ¶ˆè€—å€¼.</p>
</blockquote>
<p>è‡³äºå…¶å®ƒæ–¹æ³•å˜›ï¼Œéƒ½å¾ˆå®¹æ˜“ç†è§£ï¼Œä»£ç†æ–¹æ³•æ˜¯NSCacheåœ¨è®¡ç®—è¶…è¿‡æœ€å¤§æ¶ˆè€—å€¼æ—¶ï¼Œæ‰€ç§»é™¤çš„å¯¹è±¡ã€‚</p>
<h3 id="NSCacheä»£ç å®ç°"><a href="#NSCacheä»£ç å®ç°" class="headerlink" title="NSCacheä»£ç å®ç°"></a>NSCacheä»£ç å®ç°</h3><p>äº‹å®ä¸Šï¼ŒNSCacheåœ¨ä»¥å‰æ˜¯ä¸çŸ¥é“å†…éƒ¨å®ç°ã€‚ä½†ç°åœ¨ä¸ä¸€æ ·äº†ï¼Œç”±äºSwiftç°åœ¨å¼€æºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Swiftå»æ¢æŸ¥NSCacheçš„å…·ä½“å®ç°ã€‚<a href="https://github.com/apple/swift-corelibs-foundation/blob/master/Foundation/NSCache.swift" target="_blank" rel="external">NSCacheæºç </a>ï¼Œä»æºç å¯ä»¥çœ‹å‡ºã€‚NSCacheçš„åº•å±‚å®ç°ï¼Œæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚ä½†æ˜¯æ„Ÿè§‰æºç å­˜åœ¨ä¸€ä¸ªbugï¼Œä¸çŸ¥é“å…·ä½“æ˜¯æ€æ ·å­çš„ã€‚æ’‡å¼€è¿™äº›bugï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å…³äºæœ€å¤§çš„ç¼“å­˜å†…å­˜å®¹é‡å’Œæœ€å¤§çš„ç¼“å­˜ä¸ªæ•°ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">insert</span><span class="params">(<span class="number">_</span> entry: NSCacheEntry)</span></span> &#123; <span class="comment">// æ·»åŠ ç¼“å­˜æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> _byCost == <span class="literal">nil</span> &#123;</span><br><span class="line">        _byCost = entry</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> element = _byCost</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">let</span> e = element &#123; <span class="comment">// è®¡ç®—éœ€è¦å­˜æ”¾åœ¨é“¾è¡¨çš„ä½ç½®</span></span><br><span class="line">            <span class="keyword">if</span> e.cost &gt; entry.cost &#123;</span><br><span class="line">                <span class="keyword">let</span> newPrev = e.prevByCost</span><br><span class="line">                entry.prevByCost = newPrev</span><br><span class="line">                entry.nextByCost = e <span class="comment">// bugï¼Œåº”è¯¥æ·»åŠ e.prevByCost = entry</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">            element = e.nextByCost</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">setObject</span><span class="params">(<span class="number">_</span> obj: AnyObject, forKey key: AnyObject, cost g: Int)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> keyRef = <span class="built_in">unsafeBitCast</span>(key, to: <span class="type">UnsafePointer</span>&lt;<span class="type">Void</span>&gt;.<span class="keyword">self</span>) <span class="comment">// è·å–keyçš„æŒ‡é’ˆ</span></span><br><span class="line">    </span><br><span class="line">    _lock.lock()</span><br><span class="line">    _totalCost += g <span class="comment">// è®¡ç®—å½“å‰æ‰€ç¼“å­˜çš„ç»Ÿè®¡</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> purgeAmount = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> totalCostLimit &gt; <span class="number">0</span> &#123;</span><br><span class="line">        purgeAmount = (_totalCost + g) - totalCostLimit <span class="comment">// éœ€è¦ç§»é™¤çš„å†…å­˜å¤§å°</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> purgeCount = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> countLimit &gt; <span class="number">0</span> &#123;</span><br><span class="line">        purgeCount = (_entries.<span class="built_in">count</span> + <span class="number">1</span>) - countLimit <span class="comment">// éœ€è¦ç§»é™¤çš„å¯¹è±¡ä¸ªæ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> entry = _entries[keyRef] &#123;</span><br><span class="line">        entry.value = obj <span class="comment">// å¦‚æœkeyå·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šæ›¿æ¢æ‰</span></span><br><span class="line">        <span class="keyword">if</span> entry.cost != g &#123; <span class="comment">// æ›´æ–°cost</span></span><br><span class="line">            entry.cost = g</span><br><span class="line">            remove(entry)</span><br><span class="line">            insert(entry)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        _entries[keyRef] = <span class="type">NSCacheEntry</span>(key: key, value: obj, cost: g)</span><br><span class="line">    &#125;</span><br><span class="line">    _lock.unlock() <span class="comment">// è§£é”</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> toRemove = [<span class="type">NSCacheEntry</span>]() <span class="comment">// éœ€è¦ç§»é™¤çš„å¯¹è±¡å®ä¾‹</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> purgeAmount &gt; <span class="number">0</span> &#123; <span class="comment">// éœ€è¦ä¸¢å¼ƒç¼“å­˜çš„æ•°é‡</span></span><br><span class="line">        _lock.lock()</span><br><span class="line">        <span class="keyword">while</span> _totalCost - totalCostLimit &gt; <span class="number">0</span> &#123; <span class="comment">// ç”±äºé“¾è¡¨æœ‰åºï¼Œæ‰€ä»¥ä»ç¬¬ä¸€ä¸ªå¼€å§‹æŠ›å¼ƒï¼Œç›´åˆ°æ€»ç¼“å­˜å¤§å°å°äºè®¾å®šçš„ç¼“å­˜å¤§å°</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> entry = _byCost &#123;</span><br><span class="line">                _totalCost -= entry.cost</span><br><span class="line">                toRemove.append(entry)</span><br><span class="line">                remove(entry)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> countLimit &gt; <span class="number">0</span> &#123;</span><br><span class="line">            purgeCount = (_entries.<span class="built_in">count</span> - toRemove.<span class="built_in">count</span>) - countLimit <span class="comment">// æ›´æ–°å½“å‰ç¼“å­˜çš„å¯¹è±¡ä¸ªæ•°</span></span><br><span class="line">        &#125;</span><br><span class="line">        _lock.unlock()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> purgeCount &gt; <span class="number">0</span> &#123;</span><br><span class="line">        _lock.lock()</span><br><span class="line">        <span class="keyword">while</span> (_entries.<span class="built_in">count</span> - toRemove.<span class="built_in">count</span>) - countLimit &gt; <span class="number">0</span> &#123; <span class="comment">// å½“æœªè¶…è¿‡æœ€å¤§ç¼“å­˜å¤§å°ï¼Œä½†è¶…è¿‡æœ€å¤§çš„ç¼“å­˜ä¸ªæ•°ï¼Œåšç§»é™¤æ“ä½œ</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> entry = _byCost &#123;</span><br><span class="line">                _totalCost -= entry.cost</span><br><span class="line">                toRemove.append(entry)</span><br><span class="line">                remove(entry)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        _lock.unlock()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> del = delegate &#123; <span class="comment">// ä»£ç†æ–¹æ³•ï¼Œé‡Šæ”¾çš„å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">for</span> entry <span class="keyword">in</span> toRemove &#123;</span><br><span class="line">            del.cache(<span class="keyword">self</span>, willEvictObject: entry.value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    _lock.lock()</span><br><span class="line">    <span class="keyword">for</span> entry <span class="keyword">in</span> toRemove &#123;</span><br><span class="line">        _entries.removeValue(forKey: <span class="built_in">unsafeBitCast</span>(entry.key, to: <span class="type">UnsafePointer</span>&lt;<span class="type">Void</span>&gt;.<span class="keyword">self</span>)) <span class="comment">// the cost list is already fixed up in the purge routines, ç§»é™¤é‡Šæ”¾çš„å¯¹è±¡</span></span><br><span class="line">    &#125;</span><br><span class="line">    _lock.unlock()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°NSCacheæ˜¯æŒ‰ç…§å¯¹è±¡å®¹é‡è¿›è¡Œæ’åºçš„ã€‚åœ¨è¶…è¿‡æœ€å¤§ç¼“å­˜è®¾å®šæ—¶ï¼Œæ˜¯ä»å®¹é‡ä»å°åˆ°å¤§çš„ç§»é™¤ï¼Œè¿™ä¹Ÿå°±è§£å†³äº†ä¹‹å‰ä¸çŸ¥é“å…·ä½“å®ç°çš„è€Œä¸çŸ¥é“ç§»é™¤çš„å¯¹è±¡ã€‚å½“ç„¶ï¼Œç°åœ¨è™½ç„¶çŸ¥é“ç§»é™¤çš„æ˜¯è°ï¼Œä½†æ˜¯éœ€è¦è®¡ç®—å‡ºæ¥è¿˜æ˜¯éœ€è¦ä¸€å®šæ—¶è€—çš„ã€‚</p>
<h3 id="NSCacheå’Œå¯å˜é›†åˆçš„åŒºåˆ«"><a href="#NSCacheå’Œå¯å˜é›†åˆçš„åŒºåˆ«" class="headerlink" title="NSCacheå’Œå¯å˜é›†åˆçš„åŒºåˆ«"></a>NSCacheå’Œå¯å˜é›†åˆçš„åŒºåˆ«</h3><p>æ¥ä¸‹æ¥è¿™æ®µæ˜¯æ‘˜æŠ„è‡ª<a href="http://southpeak.github.io/blog/2015/02/11/cocoa-foundation-nscache/" target="_blank" rel="external">å—å³°å­çš„æŠ€æœ¯åšå®¢</a>ï¼Œæ€»ç»“çš„ä¸œè¥¿åœ¨å¾ˆå¤šå…³äºNSCacheçš„æ–‡ç« éƒ½å¯ä»¥çœ‹åˆ°ã€‚å½“ç„¶ï¼Œè¿˜ä»‹ç»å„ä½å¯ä»¥çœ‹ä¸€ä¸‹[Effective Objective-C 2.0 ç¼–å†™é«˜è´¨é‡çš„iOSå’ŒOS Xä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³•]</p>
<blockquote>
<p>1.NSCacheç±»ç»“åˆäº†å„ç§è‡ªåŠ¨åˆ é™¤ç­–ç•¥ï¼Œä»¥ç¡®ä¿ä¸ä¼šå ç”¨è¿‡å¤šçš„ç³»ç»Ÿå†…å­˜ã€‚å¦‚æœå…¶å®ƒåº”ç”¨éœ€è¦å†…å­˜æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œè¿™äº›ç­–ç•¥ã€‚å½“è°ƒç”¨è¿™äº›ç­–ç•¥æ—¶ï¼Œä¼šä»ç¼“å­˜ä¸­åˆ é™¤ä¸€äº›å¯¹è±¡ï¼Œä»¥æœ€å¤§é™åº¦å‡å°‘å†…å­˜çš„å ç”¨<br>2.NSCacheæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­æ·»åŠ ã€åˆ é™¤å’ŒæŸ¥è¯¢ç¼“å­˜ä¸­çš„å¯¹è±¡ï¼Œè€Œä¸éœ€è¦é”å®šç¼“å­˜åŒºåŸŸ<br>3.ä¸åƒNSMutableDictionaryå¯¹è±¡ï¼Œä¸€ä¸ªç¼“å­˜å¯¹è±¡ä¸ä¼šæ‹·è´keyå¯¹è±¡</p>
</blockquote>
<h3 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h3><p>NSCacheæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„ç¼“å­˜æ¡†æ¶ï¼Œæ–¹æ³•ç®€å•ï¼Œæºä»£ç ä¹Ÿæ¯”è¾ƒç®€å•ã€‚é€šè¿‡Swiftä¸­å…³äºNSCacheçš„æºç ï¼Œå¯ä»¥æ›´å¥½çš„ç†è§£ç¼“å­˜ç­–ç•¥ã€‚ä¹Ÿå¾ˆå»ºè®®å„ä½åœ¨å­¦ä¹ çŸ¥è¯†ç‚¹çš„æ—¶å€™ï¼Œæ·±å…¥å»å­¦ä¹ ï¼Œè¿™æ ·å¯¹äºç¼“å­˜çš„ç†è§£å°±ä¸ä»…ä»…å±€é™åœ¨åœ¨äºè°ƒç”¨ä»£ç çš„åŸºç¡€ä¸Šã€‚</p>
<p>å‚è€ƒæ–‡çŒ®ï¼š<br>1.<a href="http://southpeak.github.io/blog/2015/02/11/cocoa-foundation-nscache/" target="_blank" rel="external">å—å³°å­çš„æŠ€æœ¯åšå®¢</a><br>2.<a href="https://github.com/nixzhu/dev-blog/blob/master/2015-12-09-nscache.md" target="_blank" rel="external">nixzhu/dev-blog</a><br>3.<a href="http://www.jianshu.com/p/2fad7265317e" target="_blank" rel="external">feiyangklçš„ç®€ä¹¦</a><br>4.<a href="http://nshipster.cn/nscache/" target="_blank" rel="external">NSCache</a><br>4.[Effective Objective-C 2.0 ç¼–å†™é«˜è´¨é‡çš„iOSå’ŒOS Xä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³•] Matt Gallowayè‘— çˆ±é£ç¿” è¯‘</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/17/SDWebImage-æºç å‰–æ/" itemprop="url">
                  SDWebImage æºç å‰–æ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-07-17T00:59:11+08:00" content="2016-07-17">
              2016-07-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/æºç å‰–æ/" itemprop="url" rel="index">
                    <span itemprop="name">æºç å‰–æ</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/17/SDWebImage-æºç å‰–æ/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/17/SDWebImage-æºç å‰–æ/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åæ§½ä¸€ä¸‹ï¼Œå‰æ®µæ—¶é—´å‡†å¤‡é¢è¯•ï¼Œç„¶ååœ¨æ‹‰å‹¾é€äº†å„ç§å…¬å¸ï¼Œä¼°æ‘¸ç€åˆä¸€ä¸ªæœˆå§ï¼Œå¾—åˆ°ä¸€ä¸ªé¢è¯•æœºä¼šã€‚è¿˜æ²¡æŠŠæ¡ä½ï¼Œè·ªåœ¨äº†ç¬¬å››é¢ã€‚ä¸çŸ¥é“æ€ä¹ˆè¨€è¡¨è‡ªå·±è¿™ä»½å¿ƒæƒ…ï¼Œå¤§æ¦‚æœ‰å¦‚ä¸‹å‡ ä¸ªåŸå› å§ï¼š</p>
<blockquote>
<p>1.ä¸ªäººèƒ½åŠ›é—®é¢˜ï¼Œè¿™ä¹Ÿç®—æ˜¯æœ€å¤§çš„é—®é¢˜ï¼Œè™½ç„¶åŸºç¡€è¿˜è¿‡å¾—å»ï¼Œä½†æ˜¯é¡¹ç›®ç»éªŒå°‘ï¼ŒçŸ¥è¯†é¢æ¯”è¾ƒçª„ï¼›<br>2.å•çº¯çš„ç§»åŠ¨äº’è”ç½‘å¨é£ä¸å†ï¼ŒiOSå¸‚åœºè¿‡å‰©ï¼Œç°åœ¨éƒ½æ˜¯æ‹©ä¼˜å½•å–ï¼Œç»éªŒéƒ½æ˜¯3ï¼5å¹´ï¼Œæˆ‘è¿™ä¸€å¹´çš„æœ‰ç‚¹å°´å°¬ï¼›<br>3.æŠ•é€’çš„å…¬å¸ï¼Œå¤§å¤šæ•°æ˜¯æ¯”è¾ƒå¤§å‹çš„å…¬å¸ï¼Œå› æ­¤ä»é¡¹ç›®ç»éªŒå’Œå­¦æ ¡å°±ç»™ç­›é€‰æ‰äº†ï¼›<br>4.æ‹›è˜é«˜å³°æœŸè¿‡äº†ï¼Œå…¬å¸ç°åœ¨ä¸æ€ä¹ˆç¼ºæ–°äººï¼›<br>5.æ‹‰å‹¾çš„æœºåˆ¶é—®é¢˜ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å•Šã€‚ä¸Šä¸€å®¶é¢è¯•å…¬å¸ï¼Œé‚£å¤©ä¸Šåˆç»™æˆ‘å‘äº†é¢è¯•é‚€è¯·ï¼Œç»“æœä¸‹åˆæ‹‰å‹¾å°±ç»™æˆ‘å‘äº†ä¸€æ¡ä¸åŒ¹é…çš„é‚®ä»¶ã€‚</p>
</blockquote>
<p>ç„¶åå‘¢ï¼Œåœ¨è¿™æ®µæ—¶é—´ç–¯ç‹‚çš„è¡¥åŸºç¡€ï¼Œä»€ä¹ˆiOSåŸºç¡€ã€è®¡ç®—æœºç½‘ç»œã€leetcodeåˆ·é¢˜ã€æ“ä½œç³»ç»Ÿä¹‹ç±»çš„ã€‚æ¯å¤©ä¸‹ç­å›æ¥ï¼Œå°±å¼€å§‹çœ‹å„ç§ä¸œè¥¿ã€‚æ™•ã€æ™•ã€æ™•â€¦â€¦ä¸è¿‡æŠ•äº†è¿™ä¹ˆä¹…è¿˜æ˜¯æ²¡æœ‰é¢è¯•æœºä¼šï¼Œå°´å°¬å•Šã€‚</p>
<p>å¥½äº†ï¼Œåæ§½å®Œäº†ã€‚è¯´ä¸€ä¸‹iOSå­¦ä¹ å§ï¼Œå¾ˆå¤šæ—¶å€™å‘¢ï¼Œæˆ‘ä»¬å­¦å®ŒåŸºç¡€çŸ¥è¯†å°±ä¸çŸ¥é“æ€ä¹ˆæ·±å…¥å­¦ä¹ äº†ï¼Œé‚£ç ”ç©¶æºç ç®—æ˜¯ä¸€ä¸ªæ·±å…¥å­¦ä¹ çŸ¥è¯†çš„ä¸é”™é€‰æ‹©ã€‚è‡³äºSDWebImageè¿™ä¸ªæ¡†æ¶å‘¢ï¼Œåœ¨ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šè¿™æ–¹é¢çš„æ–‡ç« äº†ã€‚è™½ç„¶éƒ½æ˜¯åƒç¯‡ä¸€å¾‹ï¼Œä½†å¯¹äºæ²¡æœ‰è¯»è¿‡æºç çš„äººæ¥è®²ï¼Œçœ‹é‚£äº›æ–‡ç« å°±æ¯”è¾ƒåƒåŠ›äº†ã€‚æœ¬æ–‡ï¼Œä¹Ÿä»…ä»…æ˜¯çºªå½•æˆ‘åœ¨è¯»SDWebImageæºç æ—¶ï¼Œå¯¹æ­¤æ¡†æ¶çš„ä¸€äº›ç†è§£å§ã€‚</p>
<h3 id="SDWebImageè§£è¯»"><a href="#SDWebImageè§£è¯»" class="headerlink" title="SDWebImageè§£è¯»"></a>SDWebImageè§£è¯»</h3><p>SDWebImageæ˜¯ä¸€ä¸ªä¸‹è½½å…¼ç¼“å­˜çš„ç¬¬ä¸‰æ–¹å¸¸ç”¨æ¡†æ¶ï¼Œæ¡†æ¶æ•´ä½“æ¥è®²åˆ†ä¸ºä¸¤å¤§å—ï¼šå¼‚æ­¥ä¸‹è½½å’Œç¼“å­˜ã€‚å¼‚æ­¥ä¸‹è½½ä¸»è¦åˆ©ç”¨NSOperationQueueå’ŒNSURLSessionæ¥å®Œæˆå®ç°çš„ï¼Œç¼“å­˜åˆ†ä¸ºç£ç›˜ç¼“å­˜å’Œå†…å­˜ç¼“å­˜ä¸¤ç§ï¼Œå…·ä½“çš„å®ç°ï¼Œä¼šåœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ä¼šæ…¢æ…¢åˆ†æã€‚æ•´ä¸ªæ¡†æ¶ä¸»è¦åŒ…å«çŸ¥è¯†ç‚¹æœ‰ï¼šNSOperationã€NSOperationQueueã€NSURLSessionã€GCDã€NSCacheå’ŒRuntimeæ¥å®ç°çš„ï¼Œé€šè¿‡categoriesçš„æ–¹å¼æ·»åŠ åˆ°æˆ‘ä»¬å¸¸ç”¨çš„Viewä¸­ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/05/è®°ä¸€æ¬¡é¢è¯•ç»å†/" itemprop="url">
                  è®°ä¸€æ¬¡é¢è¯•ç»å†
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-07-05T13:55:50+08:00" content="2016-07-05">
              2016-07-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/é¢è¯•ç»å†/" itemprop="url" rel="index">
                    <span itemprop="name">é¢è¯•ç»å†</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/05/è®°ä¸€æ¬¡é¢è¯•ç»å†/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/05/è®°ä¸€æ¬¡é¢è¯•ç»å†/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>è·ç¦»æ¯•ä¸šåˆšå¥½ä¸€å¹´ï¼Œé‚£ä¹ˆè¿™ä¸€å¹´å‘¢ï¼æ¢äº†ä¸¤ä¸ªå…¬å¸ï¼Œç¬¬ä¸€ä¸ªç”±äºå†…éƒ¨è‚¡æƒäº‰ç«¯ï¼Œè¿˜æ²¡æœ‰åˆ°ä¸¤ä¸ªæœˆå°±å·²ç»å¤­æŠ˜ï¼ˆå¾ˆæ¶å¿ƒï¼‰ï¼›ç„¶åæ¥åˆ°äº†ç¬¬äºŒä¸ªå…¬å¸ï¼Œä¹Ÿå°±æ˜¯ç°åœ¨è¿™ä¸ªå…¬å¸ã€‚åœ¨è¿™ä¸ªå…¬å¸å‘¢ï¼Œå¾…ç€æ˜¯æ²¡å•¥é—®é¢˜ï¼Œæ­£å¸¸çš„ç¼–ç å·¥ä½œï¼Œä¸ç®—å¿™ã€‚å¥½ä¸€ç‚¹çš„å°±æ˜¯èƒ½æ¥è§¦swiftå¼€å‘ï¼Œç®—æ˜¯è¿™ä¸€å¹´æ¥æœ€å¼€å¿ƒçš„äº‹ã€‚é—®é¢˜åœ¨äºï¼Œæ²¡äººå¸¦ï¼Œå¹³æ—¶çš„ç›¸äº’æ¢è®¨åˆå°‘ï¼Œå·¥èµ„ç¨ä½ã€‚è¿˜æœ‰ä¸ªé‡è¦çš„åŸå› å°±æ˜¯ï¼šçœ¼æ›´çã€è…°ç—›ã€é¼ æ ‡æ‰‹ã€å•¤é…’è‚šï¼Œåœ¨è¿™ä¸€å¹´å†…éƒ½ä¸€ä¸€å‘ç”Ÿäº†ï¼ˆçœ‹æ¥åº”è¯¥ä¹°æœ¬ã€Šç¨‹åºå‘˜å¥åº·æŒ‡å—ã€‹ï¼‰,è¿™äº›è°‹ç”Ÿäº†æˆ‘æƒ³ç¦»å¼€æœ¬å…¬å¸çš„æƒ³æ³•ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸Šä¸ªæœˆå°±å¼€å§‹å‡†å¤‡å»é¢è¯•ã€‚</p>
<p>åœ¨æ‹‰å‹¾æŠ•äº†åŠä¸ªæœˆï¼Œç„¶åæ”¶åˆ°äº†ä¸€ä»½é¢è¯•é‚€è¯·ã€‚ç¬¬ä¸€ä¸ªæ˜ŸæœŸçš„ç®€å†å†™çš„å¤ªç®€å•ï¼Œå½“ç„¶ç¬¬äºŒä»½ä¹Ÿå·®ä¸å¤šã€‚åœ¨é¢è¯•å®Œæ‰å‘ç°ï¼Œå…¶å®åœ¨è¿™ä¸€å¹´åšè¿‡çš„é¡¹ç›®æ˜¯æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯æ·±åº¦çš„ã€‚æ‰€ä»¥ï¼Œå¯¼è‡´æŠ•äº†å¾ˆå¤šç®€å†éƒ½æ²¡äººç»™æœºä¼šã€‚æ‰€ä»¥ï¼Œéå¸¸æ„Ÿè°¢ç»™æœºä¼šé¢è¯•çš„è¿™å®¶å…¬å¸<a href="https://www.futu5.com/" target="_blank" rel="external">å¯Œé€”</a>ï¼Œå…¬å¸å¤§å¤šæ•°éƒ½æ˜¯è…¾è®¯å‡ºæ¥çš„å‘˜å·¥ï¼Œä¹Ÿæ‹¿åˆ°äº†è…¾è®¯çš„æŠ•èµ„ï¼Œéå¸¸ä¸é”™çš„ä¸€å®¶å…¬å¸ã€‚</p>
<h3 id="é¢è¯•è¿‡ç¨‹"><a href="#é¢è¯•è¿‡ç¨‹" class="headerlink" title="é¢è¯•è¿‡ç¨‹"></a>é¢è¯•è¿‡ç¨‹</h3><p>é¢è¯•æ—¶é—´æ˜¯7.4å·ï¼Œç”±äºä¹‹å‰é¢„çº¦çš„æ˜¯15ç‚¹é¢è¯•ï¼Œæ‰€ä»¥æ—©ä¸Šæˆ‘ä»ç æµ·èµ¶è½¦å»æ·±åœ³ã€‚åˆ°äº†æ·±åœ³åƒå®Œé¥­ï¼Œå·®ä¸å¤š14:20ï¼Œä¹Ÿæ²¡äº‹åšå°±æ—©ç‚¹åˆ°äº†å…¬å¸ã€‚è¿›é—¨çš„æ„Ÿå—æŒºä¸é”™ï¼Œå’Œå‰å°æ²Ÿé€šäº†ä¸€ä¸‹ã€‚ç„¶åï¼Œå°±ç­‰ç€é¢è¯•å®˜å¼€å§‹é¢è¯•ã€‚</p>
<h4 id="ä¸€é¢"><a href="#ä¸€é¢" class="headerlink" title="ä¸€é¢"></a>ä¸€é¢</h4><p>åŸºæœ¬ä¸Šçš„é¢è¯•æµç¨‹éƒ½æ˜¯å…ˆè‡ªæˆ‘ä»‹ç»ï¼Œä»‹ç»å®Œä¹‹åï¼Œå°±å¼€å§‹é’ˆå¯¹ç®€å†ä¸­çš„é¡¹ç›®å¼€å§‹æé—®ã€‚é¦–å…ˆï¼Œæ ¹æ®æˆ‘çš„é¡¹ç›®å¼€å§‹é—®é¡¹ç›®é‡åˆ°çš„æŠ€æœ¯éš¾ç‚¹ã€æ˜¯å¦æœ‰çœ‹è¿‡ç¬¬ä¸‰æ–¹æ¡†æ¶çš„æºç ã€GCDç­‰ã€‚å¾…æˆ‘å›ç­”å®Œä¹‹åï¼Œå¯ä»¥ä»ä»–çš„è¡¨æƒ…å’Œè¨€è¯­ä¸­çœ‹å‡ºï¼Œè¡¨ç°çš„ä¸æ˜¯ç‰¹åˆ«å¥½ï¼ˆå¾ˆå·®ï¼‰ã€‚ç„¶åï¼Œåœ¨çœ‹åˆ°æˆ‘çš„ç®€å†å†™äº†å…³äºæˆ‘åœ¨å­¦æ ¡å­¦è¿‡ä¸€äº›ç®—æ³•ï¼Œå°±æ‹¿äº†ä¸€ä»½è¯•é¢˜ç»™æˆ‘åšã€‚è¯•é¢˜å†…å®¹æ˜¯å…³äºï¼šæŒ‡é’ˆã€å­—èŠ‚å¯¹é½ã€æ•°æ®åº“ç­‰é—®é¢˜ï¼›è¿˜æœ‰4é“æ‰‹å†™ä»£ç é¡Œï¼ˆå…·ä½“çš„ä¸èƒ½é€éœ²ï¼Œå› ä¸ºå…¬å¸èŠ±äº†å¾ˆå¤šæ—¶é—´åœ¨è¿™ä¸ªä¸Šé¢ï¼‰ï¼Œå»ºè®®é¢è¯•å¯ä»¥çœ‹<a href="http://blog.csdn.net/v_JULY_v" target="_blank" rel="external">ç®—æ³•ä¹‹é“ ç»“æ„ä¹‹æ³•</a>çš„åšå®¢ï¼Œä¹Ÿå¯ä»¥è®¿é—®<a href="https://www.julyedu.com/" target="_blank" rel="external">7æœˆåœ¨çº¿</a>ï¼Œåšä¸»ç°åœ¨å¼€å§‹åˆ›ä¸šï¼Œæ‰€ä»¥å¯ä»¥æ”¯æŒä¸‹ã€‚åº†å¹¸çš„æ˜¯ï¼Œè‡ªå·±è¿˜æ²¡å¿˜è®°å½“æ—¶å­¦è¿‡çš„çŸ¥è¯†ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯è‡ªå·±é‡åˆ°çš„ï¼Œä¹Ÿå¾ˆå¿«å¾—å‡ºäº†ç»“æœã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰ä¸€äº›å°é—®é¢˜é”™äº†ï¼Œåœ¨é¢è¯•å®˜çš„æŒ‡å¼•ä¸‹é€æ­¥å®Œæˆäº†æœ€åçš„ä»£ç ã€‚</p>
<p>é‚£ä¹ˆåœ¨ç®—æ³•è¿™å—ï¼Œè‡ªæˆ‘æ„Ÿè§‰è¿˜ç®—å¥½ï¼Œæ¯•ç«Ÿæ›¾ä»Šå¥‹æ–—çš„ä¸œè¥¿ï¼Œè™½ç„¶å¹¶æ²¡æœ‰å–å¾—å¥½çš„æˆæœã€‚åœ¨é¢è¯•ä¸­ï¼Œå’Œé¢è¯•å®˜æ²Ÿé€šçš„ä¹Ÿå¾ˆé¡ºç•…ï¼Œé¢äº†åº”è¯¥æœ‰1ä¸ªå°æ—¶å§ï¼ˆå½“æ—¶æ²¡æ€ä¹ˆçœ‹æ‰‹æœºï¼‰ã€‚é¢è¯•å®Œä¹‹åï¼Œé¢è¯•å®˜ç»™å‡ºäº†ä¸¤ä¸ªèŒä½iMacå¼€å‘ã€iOSå¼€å‘ï¼Œé—®æˆ‘æ˜¯ä¸æ˜¯åªåšiOSå¼€å‘ã€‚è¿™ä¸ªå˜›ï¼Œå½“ç„¶ä¸æ˜¯å•Šï¼Œå¤šå­¦ä¸€é—¨æŠ€è‰ºæ€»æ˜¯ä¸é”™çš„ï¼Œæ°å¥½æœ‰æœºä¼šï¼Œé‚£ä¹ˆä¸ä¼šé‚£ä¹ˆå€”å¼ºã€‚æ¥ç€ï¼Œé—®æˆ‘æœ‰æ²¡æœ‰ä»€ä¹ˆè¦äº†è§£çš„ã€‚æˆ‘å¤§æ¦‚è¯´äº†ä¸‹ï¼Œè‡ªå·±ä»å­¦iOSä¹‹åå¼€å§‹å°±æ˜¯ä¸€ç›´è‡ªå­¦çš„ï¼Œå³ä½¿åœ¨ç°åœ¨è¿™å®¶å…¬å¸ï¼Œä¹Ÿæ²¡æ€ä¹ˆå’Œleaderæ·±å…¥æ¢è®¨iOSç›¸å…³çš„å±æ€§å·²ç»æ·±å…¥çš„çŸ¥è¯†ç­‰ï¼ˆå°å…¬å¸çš„æ‚²å“€ï¼Œèƒ½åšå‡ºæ•ˆæœå°±å¯ä»¥äº†ï¼‰ã€‚é¢è¯•å®˜ä¹Ÿå¾ˆç”¨å¿ƒçš„ç»™æˆ‘ä»‹ç»äº†ï¼Œå…³äºå…¬å¸å›¢é˜Ÿçš„å‘å±•å’ŒåŸ¹å…»ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯æœ‰äººå¸¦ï¼Œæ¯ä¸€ä¸¤å‘¨æœ‰åˆ†äº«ä¼šæˆ–è€…reviewã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™æ˜¯ç¬¦åˆæˆ‘çš„è¦æ±‚ã€‚</p>
<p>ç„¶åï¼Œé¢è¯•å®˜è®©æˆ‘ç­‰ç¬¬äºŒä½é¢è¯•å®˜æ¥é¢è¯•ã€‚éšçº¦å¯ä»¥çœ‹å‡ºï¼Œè¿™åº”è¯¥æ˜¯iOSçš„ä¸»ç®¡ã€‚</p>
<h4 id="äºŒé¢"><a href="#äºŒé¢" class="headerlink" title="äºŒé¢"></a>äºŒé¢</h4><p>è¿™è½®é¢è¯•å’Œç¬¬ä¸€è½®é¢è¯•å·®ä¸å¤šï¼Œç®€å•ä»‹ç»è‡ªå·±ï¼Œç¨å¾®é—®äº†ä¸‹é¡¹ç›®çš„ä¸œè¥¿ï¼Œåº”è¯¥å’Œä¸€é¢é¢è¯•å®˜è¯´äº†ä¸‹æˆ‘çš„æƒ…å†µï¼ˆiOSä¸ç®—å¾ˆå¥½ï¼Œç®—æ³•è¿˜è¿‡å¾—å»ï¼‰ã€‚ç„¶åæ‹¿äº†ä¸€ä»½é€»è¾‘é¢˜ï¼ˆä¸€å¼ å›¾ï¼Œæ‰¾å‡ºå…¶ä¸­çš„é‡è¦ä¿¡æ¯ï¼Œå¹¶å›ç­”é—®é¢˜ï¼‰ç»™æˆ‘åšï¼Œå¤§æ¦‚5åˆ†é’Ÿã€‚ä¸€å¼€å§‹æœ‰ç‚¹æ‡µé€¼ï¼Œä½†ç»†ä¸‹å¿ƒæ¥è¿˜æ˜¯å¯ä»¥æŠ½ç¦»å‡ºå…¶ä¸­çš„é‡è¦ä¿¡æ¯ï¼Œé”™äº†ä¸¤é“ï¼ˆä¸€é¢˜æ˜¯çœ‹æ¼é‡è¦ä¿¡æ¯ï¼Œå¦å¤–ä¸€é¢˜æ˜¯æœ‰ç‚¹äº‰è®®å§ï¼Œä¸ªäººè§‰å¾—ï¼‰ã€‚æ¢è®¨çš„è¿‡ç¨‹ä¸­ï¼Œè®²è¿°äº†åŸå› ï¼Œè¯æ˜è¿™å¹¶æ˜¯ä¸çŒœçš„ã€‚</p>
<p>è¿™ä»½é€»è¾‘é¢˜ï¼Œä¸»è¦è€ƒå¯Ÿè§‚å¯Ÿèƒ½åŠ›å’Œé€»è¾‘æ€ç»´èƒ½åŠ›ã€‚è‡³äºï¼Œåœ¨å®é™…çš„é¡¹ç›®ä¸­æœ‰æ²¡æœ‰å¸®åŠ©å‘¢ï¼Ÿé‚£å°±è§ä»è§æ™ºäº†ï¼ˆåŒæ ·ï¼Œä¸ä¼šç»™å‡ºé‚£ç§å›¾ï¼Œè§è°…ï¼‰ã€‚æ¥ç€ï¼Œè¿™è½®é¢è¯•å®˜ä¹Ÿç»™äº†ä»½é¢è¯•é¢˜ï¼Œä¸»è¦åŒ…æ‹¬ï¼šæ•°å­¦æ¦‚ç‡ã€æ•°æ®ç»“æ„ã€æ“ä½œç³»ç»Ÿã€è®¡ç®—æœºç½‘ç»œã€æ•°æ®åº“å’Œä¸€é“æ•°ç‹¬ã€‚ç”±äºï¼Œå¾ˆä¹…æ²¡æœ‰æ¥è§¦è¿‡ä¸Šé¢çš„è¿™äº›é—®é¢˜ï¼Œæœ‰å‡ é“é¢˜å°±æ¯”è¾ƒçŠ¹è±«ã€‚è‡³äºæ•°ç‹¬å˜›ï¼Œæˆ‘å¹³æ—¶å°±å–œæ¬¢ç©è¿™ä¸ªï¼Œè‡ªç„¶ä¸ä¼šæœ‰å¤ªå¤§é—®é¢˜ã€‚</p>
<p>æœ€åï¼Œå’Œé¢è¯•å®˜è®¨è®ºäº†å…³äºå‡ é“é”™è¯¯é¢˜ç›®çš„é—®é¢˜ã€‚æœ‰ä¸€äº›ï¼Œå¯èƒ½æ˜¯å¿˜äº†æ¦‚å¿µï¼Œç„¶ååšé”™ã€‚æœ‰ä¸€äº›ï¼Œæ˜¯ç›´æ¥å°±å¿˜è®°åªæ˜¯ç‚¹äº†ã€‚ä¸è¿‡ï¼Œæ²Ÿé€šèµ·æ¥è¿˜ç®—å¯ä»¥ã€‚</p>
<h4 id="ä¸‰é¢"><a href="#ä¸‰é¢" class="headerlink" title="ä¸‰é¢"></a>ä¸‰é¢</h4><p>ä¸‰é¢æ˜¯CTOé¢è¯•ï¼Œç”±äºäºŒé¢æ—¶ï¼Œé¢è¯•å®˜å»å¼€ä¼šäº†ï¼ŒèŠ±äº†æ¯”è¾ƒé•¿çš„æ—¶é—´ã€‚CTOé¢ä¹Ÿæ˜¯ç­‰äº†æ¯”è¾ƒä¹…ï¼Œä¸è¿‡è¿˜ç®—å¥½ï¼ˆCTOéƒ½æ¯”è¾ƒå¿™ï¼Œèƒ½æŠ½å‡ºçš„æ—¶é—´ä¸å¤šï¼‰ï¼Œåœ¨HRã€ä¸€é¢é¢è¯•å®˜å’ŒCTOåå•†ä¸‹ï¼Œå†³å®šé¢è¯•å®Œæ¯•ã€‚ç­‰äº†ä¸€æ®µæ—¶é—´ï¼ŒHRå¸¦é¢†æˆ‘å»CTOåŠå…¬å¸ï¼Œè¿™æœŸé—´ï¼Œæ¯”è¾ƒå¼€å¿ƒçš„æ˜¯ä¸€é¢é¢è¯•å®˜æ‹¿äº†ä¸€äº›é¢åŒ…ç»™æˆ‘ï¼Œéå¸¸ niceã€‚åˆ°äº†CTOåŠå…¬å®¤ï¼Œåˆæ˜¯ä¸€æ¬¡è‡ªæˆ‘ä»‹ç»ã€‚ç„¶åï¼Œé—®äº†ä¸€äº›å¹³æ—¶ä¸ä¼šé‡åˆ°çš„é—®é¢˜ã€‚å…·ä½“çš„çŸ¥è¯†ç‚¹å¦‚ä¸‹ï¼ˆè¿˜æ˜¯ä¸ä¼šè¯´åŸé¢˜ï¼‰ï¼š</p>
<blockquote>
<p>ç¬¬ä¸€é¢˜ï¼šforçš„ä¸åŒå½¢å¼å®ç°ï¼›<br>ç¬¬äºŒé¢˜ï¼šå®å®šä¹‰<br>ç¬¬ä¸‰é¢˜ï¼šæ¦‚ç‡<br>ç¬¬å››é¢˜ï¼šæŸä¸ªç®—æ³•</p>
</blockquote>
<p>å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼ŒèŠ±äº†æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œæ€»æ˜¯æ€€ç–‘è‡ªå·±ä¼šä¸ä¼šforå¾ªç¯ã€‚æ„Ÿè§‰è‡ªå·±æ²¡æœ‰é—®é¢˜ï¼ŒCTOæ¯æ¬¡çœ‹äº†ä¹‹åï¼Œéƒ½è¯´æœ‰é—®é¢˜å†æ”¹ã€‚æœ€åï¼Œåœ¨æ¢³ç†forå¾ªç¯æ‰§è¡Œçš„é¡ºåºçš„æ—¶å€™ï¼Œé¢è¯•å®˜çš„è¯­å¥è¯æé†’äº†è‡ªå·±ï¼ŒçœŸæ˜¯ä¸€è¯­æƒŠé†’æ¢¦ä¸­äººï¼Œå½“å¤´ä¸€å–ã€‚å¥½å§ï¼Œè¿˜æ˜¯è‡ªå·±å‘ï¼Œæ­¤æ—¶æ„Ÿè§‰ä¸å¦™ï¼Œæœ‰ç‚¹æ‚¬äº†ã€‚<br>ç¬¬äºŒé¢˜å®å®šä¹‰ï¼Œä¹ŸèŠ±äº†å¾ˆå¤šæ—¶é—´ã€‚å®å®šä¹‰åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ˜¯æ›¿æ¢åŸæœ‰çš„ä»£ç ã€‚è€Œä¸æ˜¯æ‹¿å®å®šä¹‰å†…éƒ¨çš„ç»“æœå»åšè®¡ç®—ï¼Œåœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­æ˜¯å¾ˆå€¼å¾—æ³¨æ„çš„ã€‚é‚£ä¹ˆæ‰©å±•é˜…è¯»ï¼šconstã€#importå’Œ#defineçš„åŒºåˆ«<br>ç¬¬ä¸‰é¢˜ï¼ŒèŠ±äº†æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œæ”¹æ”¹æ”¹ï¼Œæ•°å­¦æ¦‚ç‡é¢˜ã€‚<br>ç¬¬å››é¢˜ç®—æ³•é¢˜ï¼Œè¿™ä¸ªå˜›ï¼Œè®²æ€æƒ³ï¼Œé‡åˆ°äº†å°±çŸ¥é“ã€‚</p>
<p>æ•´ä¸ªCTOé¢è¯•çš„è¿‡ç¨‹éƒ½æ˜¯æ‡µçš„ï¼Œä»ç¬¬ä¸€ä¸ªé—®é¢˜å¼€å§‹ï¼ŒCTOçš„å®‰é™å’Œä¸€çœ¼æŠ“ä½é‡è¦ç‚¹çš„æ°”åœºè®©æˆ‘çœŸå¿ƒholdä¸ä½ã€‚ä¸è¿‡ï¼Œåœ¨CTOé¢è¯•ç»“æŸä¹‹åï¼Œå’Œä¸€é¢é¢è¯•å®˜èŠå¤©çš„æ—¶å€™è¯´CTOæ˜¯ä¸ªéå¸¸å‰å®³çš„äººã€‚å¥½å§ï¼Œä¹Ÿç®—æ„Ÿå—åˆ°æŠ€æœ¯å¤§æ‹¿çš„æ°”åœºäº†ã€‚åœ¨ä¸Šé¢çš„é—®é¢˜é—®å®Œä¹‹åï¼Œä¸»è¦äº†è§£äº†ä¸€ä¸‹æ€ä¹ˆå­¦ä¹ çŸ¥è¯†ï¼Œåœ¨å“ªå­¦ä¹ å’ŒæŒæ¡çš„æŠ€èƒ½ï¼Œè¿™äº›é—®é¢˜ä¹Ÿå› ä¸ºå‰é¢çš„é—®é¢˜å—åˆ°å½±å“è€Œæ²¡æœ‰æ€ä¹ˆå›ç­”å¥½ã€‚æ„Ÿè§‰æ›´åŠ æ‚¬äº†ï¼Œå¿ƒå¤´å äº†ä¸€å—çŸ³å¤´ï¼Œæ‹‰ä¸ä¸Šå»ï¼Œæ‰ä¸ä¸‹æ¥ã€‚</p>
<p>é¢è¯•å®Œæ¯•å·²ç»19:30äº†ï¼Œå¥½å§ï¼Œå¸¦ç€ä¸€è„¸å¿å¿‘çš„å¿ƒå’Œæ‡µé€¼çš„è„¸ï¼Œæ¶Œè¿›åœ¨å·æµä¸æ¯çš„äººæµä¸­ï¼Œæ¶ˆå¤±åœ¨ç’€ç’¨çš„éœ“è™¹ç¯çš„å–§åš£ä¸–ç•Œé‡Œâ€¦â€¦</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æ•´ä¸ªé¢è¯•è¿‡ç¨‹ï¼Œå¯ä»¥å‘ç°iOSçš„åŸºç¡€æŒæ¡ä¸å¤Ÿï¼Œå­¦ä¹ çš„çŸ¥è¯†æ·±åº¦ä¸å¤Ÿã€‚ä»…ä»…åœç•™åœ¨è°ƒç”¨APIçš„å±‚é¢ï¼Œæ²¡æœ‰æ·±å…¥äº†è§£iOSçš„æŠ€æœ¯ç­‰ã€‚å¯¹äºåŸºç¡€çš„ç®—æ³•ã€æ•°æ®ç»“æ„ã€è®¡ç®—æœºç½‘ç»œå’Œæ“ä½œç³»ç»Ÿçš„çŸ¥è¯†å¿˜çš„æ¯”è¾ƒå¿«ã€‚æ²¡æœ‰æ€ä¹ˆå»å¤ä¹ ï¼Œè¿™ä¸ªç®—æ˜¯ä¸€å¤§å¼Šç«¯ã€‚ä¸è¿‡ï¼Œé€šè¿‡è¿™æ¬¡é¢è¯•ï¼Œå¯ä»¥çŸ¥æ™“è‡ªå·±çš„æŠ€æœ¯åœç•™çš„é˜¶æ®µï¼Œåœ¨æ·±å…¥å­¦ä¹ çš„é“è·¯ä¸Šï¼ŒçŸ¥é“è‡ªå·±åº”è¯¥å¼¥è¡¥çš„æ–¹å‘ã€‚å¥½äº†ï¼Œæœ€åï¼Œä¸ç®¡æœ‰æ²¡æœ‰offerï¼Œå°±ç®—æ˜¯ä¸€æ¬¡æ£€è§†è‡ªå·±çš„ç»å†å§ã€‚</p>
<h3 id="å®‰åˆ©"><a href="#å®‰åˆ©" class="headerlink" title="å®‰åˆ©"></a>å®‰åˆ©</h3><blockquote>
<p>æˆ‘ä»¬çš„ç”Ÿå‘½ï¼Œæœ‰çš„æ—¶å€™ä¼šæ˜¯æ³¥æ²™ï¼Œä½ å¯èƒ½æ…¢æ…¢åœ°å°±ä¼šåƒæ³¥æ²™ä¸€æ ·ï¼Œæ²‰æ·€ä¸‹å»äº†ï¼Œä¸€æ—¦ä½ æ²‰æ·€ä¸‹å»äº†ï¼Œä¹Ÿè®¸ä½ ä¸ç”¨å†ä¸ºäº†å‰è¿›è€ŒåŠªåŠ›äº†ï¼Œä½†æ˜¯ä½ å´æ°¸è¿œè§ä¸åˆ°é˜³å…‰äº†ã€‚æ‰€ä»¥æˆ‘å»ºè®®å¤§å®¶ï¼Œä¸ç®¡ä½ ç°åœ¨çš„ç”Ÿå‘½æ˜¯æ€æ ·çš„ï¼Œä¸€å®šè¦æœ‰æ°´çš„ç²¾ç¥ï¼Œåƒæ°´ä¸€æ ·ä¸æ–­çš„ç§¯è“„è‡ªå·±åœ°åŠ›é‡ï¼Œä¸æ–­çš„å†²ç ´éšœç¢ï¼Œå½“ä½ å‘ç°æ—¶æœºä¸åˆ°çš„å’Œæ—¶å€™ï¼ŒæŠŠè‡ªå·±çš„åšåº¦ç»™ç§¯ç´¯èµ·æ¥ï¼Œå½“æœ‰ä¸€å¤©æ—¶æœºæ¥ä¸´çš„æ—¶å€™ï¼Œä½ å°±èƒ½å¤Ÿå¥”è…¾å…¥æµ·ï¼Œæˆå°±è‡ªå·±çš„ç”Ÿå‘½ï¼ â€“ ä¿æ•æ´ªã€Šèµ¢åœ¨ä¸­å›½ã€‹</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/05/iOSä¹‹weak-strong-dance/" itemprop="url">
                  iOSä¹‹weak-strong dance
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-07-05T13:30:27+08:00" content="2016-07-05">
              2016-07-05
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/05/iOSä¹‹weak-strong-dance/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/05/iOSä¹‹weak-strong-dance/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.jianshu.com/p/0f28c1bead3e" target="_blank" rel="external">weak-strong dance</a><br><a href="http://sherlockyao.com/blog/2015/08/08/weakself-and-strongself-in-blocks/" target="_blank" rel="external">weak-strong dance</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/01/å­¦ä¹ èµ„æ–™æ±‡æ€»/" itemprop="url">
                  å­¦ä¹ èµ„æ–™æ±‡æ€»
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-07-01T15:12:25+08:00" content="2016-07-01">
              2016-07-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/å­¦ä¹ èµ„æ–™/" itemprop="url" rel="index">
                    <span itemprop="name">å­¦ä¹ èµ„æ–™</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/01/å­¦ä¹ èµ„æ–™æ±‡æ€»/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/01/å­¦ä¹ èµ„æ–™æ±‡æ€»/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <table>
<thead>
<tr>
<th>å½’å±</th>
<th>åšå®¢</th>
<th>æ·»åŠ æ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr>
<td>Swift</td>
<td><a href="https://github.com/linkedin/swift-style-guide" target="_blank" rel="external">LinkedIn Swift Style Guide</a></td>
<td>2016-7-1</td>
</tr>
<tr>
<td>iOSé¢è¯•å¿ƒç»</td>
<td><a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88/%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8A%EF%BC%89.md" target="_blank" rel="external">æ‹›è˜ä¸€ä¸ªé è°±çš„ iOS</a></td>
<td>2016-7-5</td>
</tr>
</tbody>
</table>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/29/å…³äºå•ä¾‹æ¨¡å¼çš„æ€è€ƒ/" itemprop="url">
                  å…³äºå•ä¾‹æ¨¡å¼çš„æ€è€ƒ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-06-29T20:56:36+08:00" content="2016-06-29">
              2016-06-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/è®¾è®¡æ¨¡å¼/" itemprop="url" rel="index">
                    <span itemprop="name">è®¾è®¡æ¨¡å¼</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/29/å…³äºå•ä¾‹æ¨¡å¼çš„æ€è€ƒ/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/29/å…³äºå•ä¾‹æ¨¡å¼çš„æ€è€ƒ/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä¸€ç›´ä»¥æ¥å‘¢ï¼Œå¯¹äºè®¾è®¡æ¨¡å¼æ„Ÿè§‰å°±æ˜¯éå¸¸ç¥å¥‡çš„ä¸€ä¸ªä¸œè¥¿ã€‚ä»ç½‘ä¸Šå¼€å§‹æœç´¢ä¸€äº›å…³äºè®¾è®¡æ¨¡å¼çš„æ•™ç¨‹æ¥å­¦ä¹ ï¼Œä¸è¿‡è¯´çœŸçš„ï¼Œä»…ä»…æ˜¯è‡ªå·±é€šè¿‡ç½‘ç»œçš„èµ„æ–™æ¥å­¦ä¹ æ˜¯éå¸¸è›‹ç–¼çš„ä¸€ä»¶äº‹ã€‚å› ä¸ºï¼Œæ²¡æœ‰äººæŒ‡å¯¼ï¼Œæ„Ÿè§‰å°±æ˜¯çŸ¥å…¶ç„¶ï¼Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œå°±ä¾‹å¦‚æ¥ä¸‹æ¥è¦å†™çš„å•ä¾‹æ¨¡å¼çš„çŒœæƒ³ã€‚é‚£ä¹ˆï¼Œä»Šå¤©è¦è§£å†³ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿæœ‰å¦‚ä¸‹ä¸‰ç‚¹ï¼š</p>
<blockquote>
<p>1.ç”±äºå•ä¾‹æ¨¡å¼åœ¨å†…å­˜ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™å¼€å§‹åˆ›å»ºï¼Œç›´åˆ°applicationåº”ç”¨é”€æ¯æ—¶ï¼Œæ‰ä»å†…å­˜ä¸­ç§»é™¤ã€‚é‚£ä¹ˆé—®é¢˜åœ¨äºï¼Œå•ä¾‹å¯¹è±¡åœ¨å†…å­˜ä¸­åˆ›å»ºä¹‹åï¼Œæ‰€å çš„å†…å­˜å¤§å°æ˜¯å¤šå°‘å‘¢ï¼Ÿ<br>2.åœ¨å•ä¾‹æ–¹æ³•ä¸­ï¼Œä½¿ç”¨å¤šçº¿ç¨‹ï¼Œå¯¹å•ä¾‹ä¸­å±æ€§çš„å½±å“ï¼Ÿ<br>3.åœ¨é‚£äº›æ¡ä»¶ä¸‹ä½¿ç”¨å•ä¾‹ã€å®ä¾‹åŠç±»æ–¹æ³•ï¼Ÿ</p>
</blockquote>
<h3 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h3><p>ç®€å•è¯´ä¸€ä¸‹å•ä¾‹æ¨¡å¼å§ï¼ˆä¸‡å¹´ä¸å˜çš„æ¢—ï¼Œç™¾åº¦ä¸€å †ä¸€æ ·çš„ï¼‰ï¼Œç®—äº†è¿˜æ˜¯ä¸è¦è®²å•ä¾‹æ¨¡å¼äº†ï¼Œç›´æ¥æ”¾å‡ ä¸ªå¯¹å•ä¾‹æ¨¡å¼è®²è§£ä¸é”™çš„åšå®¢ï¼š</p>
<blockquote>
<p> <a href="http://www.jianshu.com/p/4130096cee03" target="_blank" rel="external">åå±±è®ºå‰‘ä¹‹æµ…è°ˆiOSå•ä¾‹å¯¹è±¡</a><br> <a href="https://segmentfault.com/a/1190000003941840" target="_blank" rel="external">iOSä¸­å•ä¾‹æ¨¡å¼</a><br> <a href="http://shaynechow.github.io/iOS-Singleton/" target="_blank" rel="external">iOSå•ä¾‹æ¨¡å¼</a><br> <a href="http://www.jianshu.com/p/7486ebfcd93b" target="_blank" rel="external">iOSä¹‹å•ä¾‹æ¨¡å¼åˆæ¢</a></p>
</blockquote>
<h3 id="å•ä¾‹æ¨¡å¼çŒœæƒ³æ±‚è¯"><a href="#å•ä¾‹æ¨¡å¼çŒœæƒ³æ±‚è¯" class="headerlink" title="å•ä¾‹æ¨¡å¼çŒœæƒ³æ±‚è¯"></a>å•ä¾‹æ¨¡å¼çŒœæƒ³æ±‚è¯</h3><p>ä¸Šé¢çš„åšå®¢ï¼Œå¤§ä½“ä¸Šèƒ½è®²æ¸…æ¥šå•ä¾‹æ¨¡å¼ï¼Œä»¥åŠå•ä¾‹æ¨¡å¼çš„åˆ›å»ºç­‰é—®é¢˜ã€‚é‚£ä¹ˆï¼Œå›åˆ°æ–‡ç« çš„å¼€å§‹ï¼Œæˆ‘ä»¬æåˆ°çš„å‡ ä¸ªé—®é¢˜ã€‚</p>
<p>çœ‹ä¸ªä¾‹å­ï¼Œä¸»è¦æ˜¯è§£å†³è¿™ä¸‰ä¸ªé—®é¢˜çš„ç®€å•ä¾‹å­</p>
<blockquote>
<p> å¼€å‘ç¯å¢ƒ: Xcode 7.3<br> å¼€å‘è¯­è¨€: Swift 2.2, Objective-C</p>
</blockquote>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">// SYObject.h</span><br><span class="line">@interface SYObject : NSObject</span><br><span class="line"></span><br><span class="line">+ (SYObject *)shareInstance;</span><br><span class="line">- (size_t)calculateInstanceSize;</span><br><span class="line">- (size_t)calculateInstanceSize2;</span><br><span class="line">- (void)getInstanceIvar;</span><br><span class="line"></span><br><span class="line">@property (nonatomic, assign) long longValue;</span><br><span class="line">@property (nonatomic, assign) BOOL isFailure;</span><br><span class="line">////@property (nonatomic, assign) int value;</span><br><span class="line">////@property (nonatomic, assign) short shortValue;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// SYObject.m</span><br><span class="line">#import &quot;SYObject.h&quot;</span><br><span class="line">#import &lt;malloc/malloc.h&gt;</span><br><span class="line">#import &lt;objc/runtime.h&gt;</span><br><span class="line"></span><br><span class="line">@implementation SYObject</span><br><span class="line"></span><br><span class="line">+ (SYObject *)shareInstance &#123;</span><br><span class="line">    static SYObject *instance;</span><br><span class="line">    static dispatch_once_t token;</span><br><span class="line">    </span><br><span class="line">    dispatch_once(&amp;token, ^&#123;</span><br><span class="line">        instance = [[self alloc] init];</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    return instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è®¡ç®—å®ä¾‹å¤§å°</span><br><span class="line">- (size_t)calculateInstanceSize &#123;</span><br><span class="line">    size_t size = malloc_size((__bridge const void *)([SYObject shareInstance]));</span><br><span class="line">    </span><br><span class="line">    return size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è®¡ç®—å®ä¾‹å¤§å°</span><br><span class="line">- (size_t)calculateInstanceSize2 &#123;</span><br><span class="line">    size_t size = size = class_getInstanceSize([SYObject class]);</span><br><span class="line">    </span><br><span class="line">    return size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è·å–ivars</span><br><span class="line">- (void)getInstanceIvar &#123;</span><br><span class="line">    unsigned int count = 0;</span><br><span class="line">    Class cls = [SYObject class];</span><br><span class="line">    </span><br><span class="line">    Ivar *ivars = class_copyIvarList(cls, &amp;count);</span><br><span class="line">    </span><br><span class="line">    for (int i = 0; i &lt; count; i++) &#123;</span><br><span class="line">        Ivar *ivar = &amp;ivars[i];</span><br><span class="line">        </span><br><span class="line">        NSLog(@&quot;instance variable&apos;s name: %s at index: %d&quot;, ivar_getName(*ivar), i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è°ƒç”¨</span><br><span class="line">let instance = SYObject.shareInstance()</span><br><span class="line">var count = instance.calculateInstanceSize()</span><br><span class="line">print(count)</span><br><span class="line"></span><br><span class="line">count = instance.calculateInstanceSize2()</span><br><span class="line">instance.getInstanceIvar()</span><br><span class="line">print(count)</span><br><span class="line"></span><br><span class="line">Sample Output:</span><br><span class="line">molloc instance size: 32</span><br><span class="line">get instance size: 24</span><br><span class="line">2016-06-30 00:47:27.591 SYMultipleThread[78991:1216822] instance variable&apos;s name: _isFailure at index: 0</span><br><span class="line">2016-06-30 00:47:27.591 SYMultipleThread[78991:1216822] instance variable&apos;s name: _isSuccess at index: 1</span><br></pre></td></tr></table></figure></p>
<p>é¦–å…ˆè§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå•ä¾‹æ¨¡å¼è‡ªåˆ›å»ºä¹‹åï¼Œåœ¨å†…å­˜ä¸­æ‰€å çš„å¤§å°æ˜¯å¤šå°‘ï¼Ÿä»ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®¹æ˜“çœ‹å‡ºç»“æœï¼Œé€šè¿‡æˆ‘ä»¬æ·»åŠ ä¿®æ”¹å±æ€§å’Œç§æœ‰å±æ€§ç­‰å‚æ•°ï¼Œç„¶åå°±å¯ä»¥å¾—åˆ°å•ä¾‹åœ¨å†…å­˜ä¸­æœ€ç»ˆçš„ç»“æœã€‚</p>
<p>ä»ä¸Šé¢ï¼Œæˆ‘ä»¬è¿˜å‘ç°å¦å¤–ä¸¤ä¸ªé—®é¢˜ï¼š1.ä¸ºä½•ä¸¤æ¬¡æ–¹æ³•è°ƒç”¨çš„ç»“æœä¸ä¸€æ ·ï¼Ÿ2.è®¡ç®—çš„ç»“æœä¸æ˜¯å„ä¸ªç±»å‹å­—èŠ‚å¤§å°ä¹‹å’Œå˜›ï¼Ÿ<br>ç¬¬1ä¸ªé—®é¢˜ï¼Œåœ¨äºiOSåˆ†é…å†…å­˜æ—¶ï¼Œå°äº16å­—èŠ‚çš„å†…å­˜ï¼Œä¼šç›´æ¥åˆ†é…16å­—èŠ‚ï¼Œæ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†å­˜å‚¨æ•ˆç‡ã€‚æ‰€ä»¥ï¼Œç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯iOSåˆ†é…å†…å­˜çš„å¤§å°ï¼Œç¬¬äºŒä¸ªæ–¹æ³•åˆ™æ˜¯å®é™…å¯¹è±¡æ‰€å çš„å†…å­˜ç©ºé—´å¤§å°ã€‚<br>ç¬¬2ä¸ªé—®é¢˜ï¼Œä¸ºä½•ä¸ä¸€æ ·ï¼Ÿ<strong><a href="http://www.cnblogs.com/clover-toeic/p/3853132.html" target="_blank" rel="external">å­—èŠ‚å¯¹é½</a></strong>ï¼Œè‡³äºä»€ä¹ˆæ˜¯å­—èŠ‚å¯¹é½ï¼Œå°±ä¸å†å±•å¼€äº†ã€‚ä½†å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¯´iOSä¼šæ ¹æ®æˆ‘ä»¬å®šä¹‰çš„å±æ€§å¤§å°è‡ªå·±å»åˆ†é…æœ€å°çš„å†…å­˜ç©ºé—´ï¼ˆå¦‚æœæ²¡æœ‰å®éªŒé”™è¯¯çš„è¯ï¼ŒCè¯­è¨€ä¸­çš„ç»“æ„ä½“å°±ä¸ä¼šï¼Œæ‰€ä»¥Cåšå†…å­˜ä¼˜åŒ–çš„æ—¶å€™ï¼Œå¯ä»¥é’ˆå¯¹ç»“æ„ä½“ä¸­çš„å˜é‡ä½ç½®åšä¼˜åŒ–ï¼‰ã€‚</p>
<p>ç¬¬äºŒä¸ªé—®é¢˜çš„ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SYThreadModel</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">""</span></span><br><span class="line">    <span class="keyword">var</span> b = <span class="string">""</span></span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">shareInstance</span>() -&gt; <span class="title">SYThreadModel</span> </span>&#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">Static</span> </span>&#123;</span><br><span class="line">            <span class="keyword">static</span> <span class="keyword">var</span> token: dispatch_once_t = <span class="number">0</span></span><br><span class="line">            <span class="keyword">static</span> <span class="keyword">var</span> instance: <span class="type">SYThreadModel</span>? = <span class="literal">nil</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        dispatch_once(&amp;<span class="type">Static</span>.token) &#123; </span><br><span class="line">            <span class="type">Static</span>.instance = <span class="type">SYThreadModel</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="type">Static</span>.instance!</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setValue</span><span class="params">(str: String, ch: String)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> queue = dispatch_get_global_queue(<span class="type">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>, <span class="number">0</span>)</span><br><span class="line">        dispatch_async(queue) &#123; </span><br><span class="line">            <span class="type">SYThreadModel</span>.shareInstance().a = str</span><br><span class="line">            <span class="type">NSThread</span>.sleepForTimeInterval(<span class="number">2</span>)</span><br><span class="line">            <span class="type">SYThreadModel</span>.shareInstance().b = ch</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"<span class="subst">\(SYThreadModel.shareInstance()</span>.a) == <span class="subst">\(SYThreadModel.shareInstance()</span>.b)"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line"><span class="keyword">let</span> instance = <span class="type">SYThreadModel</span>.shareInstance()</span><br><span class="line">instance.setValue(<span class="string">"a"</span>, ch: <span class="string">"b"</span>)</span><br><span class="line">instance.setValue(<span class="string">"c"</span>, ch: <span class="string">"d"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Sample Output</span></span><br><span class="line"><span class="built_in">c</span> == b</span><br><span class="line"><span class="built_in">c</span> == b</span><br></pre></td></tr></table></figure></p>
<p>å¦‚ä¸Šé¢ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚é‚£ä¹ˆï¼Œé—®é¢˜åœ¨äºä¸ºä½•ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜å‘¢ï¼Ÿè¿™å°±å½’å’åˆ°dispatch_async()ï¼Œç”±äºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œdispatch_asyncæ˜¯å¹¶è¡Œæ‰§è¡Œï¼Œå› æ­¤è°éƒ½æœ‰å¯èƒ½æ”¹å˜aæˆ–bçš„å€¼ã€‚è¿™ä¹Ÿå°±ä½¿å¾—åœ¨å¤šçº¿ç¨‹ä½¿ç”¨å•ä¾‹ä¼šè®©æ•°æ®å˜çš„å¾ˆä¸å®‰å…¨ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p> å•ä¾‹ï¼šä½¿ç”¨å•ä¾‹ä»…ä»…æ˜¯ä¿è¯è¯¥ç±»åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªä¼šå­˜åœ¨ä¸€å—å†…å­˜ç©ºé—´ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†å†…å­˜ç©ºé—´çš„å¼€é”€ï¼›<br> å®ä¾‹ï¼šå®ä¾‹æ˜¯ä¿è¯æ•°æ®çš„éš”ç¦»ï¼Œäº’ç›¸ä¸å†²çªï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šé€‰æ‹©ä½¿ç”¨å®ä¾‹å¯¹è±¡ï¼›<br> ç±»æ–¹æ³•ï¼šä¹Ÿç§°é™æ€æ–¹æ³•ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œåªå­˜åœ¨äºè°ƒç”¨è¯¥æ–¹æ³•å¼€å§‹ï¼Œç›´åˆ°è¯¥æ–¹æ³•æ‰§è¡Œç»“æŸï¼Œè¿™æ˜¯ç±»æ–¹æ³•é‡Œé¢å¼€è¾Ÿçš„å†…å­˜ç©ºé—´å°±ä¼šè¢«é”€æ¯ã€‚</p>
</blockquote>
<p>é€šè¿‡ï¼Œå¯¹ä¸‰ç§æ–¹æ³•çš„ç®€å•æè¿°ï¼Œç„¶åè‡ªå·±æ€è€ƒï¼Œåœ¨å…·ä½“çš„é¡¹ç›®ä¸­åº”è¯¥å¦‚ä½•å»ä½¿ç”¨ã€‚</p>
<h3 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h3><p>æœ€åï¼Œæ€»ç»“ä¸€ä¸‹ï¼šå•ä¾‹æ¨¡å¼åœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼Œæ§åˆ¶å®ä¾‹ä¸ªæ•°ï¼ŒèŠ‚çœç³»ç»Ÿèµ„æºï¼›ä½†åŒæ ·ä¹Ÿä¼šä½¿å¾—ç³»ç»Ÿæ•°æ®å˜çš„å†—ä½™ï¼Œï¼ˆä¾‹å¦‚ï¼šæŸä¸ªç±»æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ä¸€æ¬¡ï¼Œä¹‹åå°±å†ä¹Ÿä¸ä½¿ç”¨äº†ï¼Œå¦‚æœä½¿ç”¨å•ä¾‹ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå’Œç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€æ ·çš„ï¼Œé‡Šæ”¾ä¸æ‰ï¼Œç”±æ­¤å¢åŠ äº†æ•°æ®çš„å†—ä½™ï¼‰ï¼›å°½é‡ä¸åœ¨ä½¿ç”¨å¤šçº¿ç¨‹å»ä¿®æ”¹å•ä¾‹å±æ€§ï¼Œå¦åˆ™å°±åƒç¬¬äºŒä¸ªé—®é¢˜ä¸€æ ·ï¼Œä½¿å¾—æ•°æ®å¹¶ä¸å®‰å…¨ã€‚å› æ­¤ï¼Œåœ¨æœ€åçš„æœ€åï¼Œåœ¨å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨å¥½å•ä¾‹æ¨¡å¼ï¼Œåˆ‡å‹¿æ»¥ç”¨ï¼Œå¦åˆ™å‡ºç°çš„åæœå°±éå¸¸éº»çƒ¦ã€‚</p>
<h3 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h3><p><a href="http://objccn.io/issue-13-2/" target="_blank" rel="external">é¿å…æ»¥ç”¨å•ä¾‹</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/29/ç®€å†-æ¨æ£®-iOSå¼€å‘å·¥ç¨‹å¸ˆ/" itemprop="url">
                  ç®€å†.æ¨æ£®.iOSå¼€å‘å·¥ç¨‹å¸ˆ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-06-29T13:25:18+08:00" content="2016-06-29">
              2016-06-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ç®€å†/" itemprop="url" rel="index">
                    <span itemprop="name">ç®€å†</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/29/ç®€å†-æ¨æ£®-iOSå¼€å‘å·¥ç¨‹å¸ˆ/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/29/ç®€å†-æ¨æ£®-iOSå¼€å‘å·¥ç¨‹å¸ˆ/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="åŸºæœ¬èµ„æ–™"><a href="#åŸºæœ¬èµ„æ–™" class="headerlink" title="åŸºæœ¬èµ„æ–™"></a>åŸºæœ¬èµ„æ–™</h3><blockquote>
<p> å§“   åï¼šæ¨æ£®<br> è”ç³»ç”µè¯ï¼š13726213088<br> é‚®   ç®±ï¼š735003861@qq.com, seninchina@gmail.com<br> åš   å®¢ï¼šblog.ysenin.com<br> åº”è˜èŒä½ï¼šiOSå¼€å‘å·¥ç¨‹å¸ˆ<br> å·¥ä½œç»éªŒï¼š1å¹´å·¥ä½œã€åŠå¹´å®ä¹ </p>
</blockquote>
<h3 id="æ•™è‚²èƒŒæ™¯"><a href="#æ•™è‚²èƒŒæ™¯" class="headerlink" title="æ•™è‚²èƒŒæ™¯"></a>æ•™è‚²èƒŒæ™¯</h3><blockquote>
<p> æ¯•ä¸šé™¢æ ¡ï¼šåŒ—äº¬ç†å·¥å¤§å­¦ç æµ·å­¦é™¢<br> ä¸“   ä¸šï¼šè½¯ä»¶å·¥ç¨‹</p>
</blockquote>
<h3 id="è£èª‰åŠè·å¥–æƒ…å†µ"><a href="#è£èª‰åŠè·å¥–æƒ…å†µ" class="headerlink" title="è£èª‰åŠè·å¥–æƒ…å†µ"></a>è£èª‰åŠè·å¥–æƒ…å†µ</h3><blockquote>
<p> ç¨‹åºåŸºç¡€è®¾è®¡åä¼šè´Ÿè´£äººä»¥åŠåä¼šåŸ¹è®­ä¸»è®²äºº<br> 2013å¹¿ä¸œçœACM-ICPCä¼˜èƒœå¥–<br> å¤šæ¬¡æ ¡å†…ç®—æ³•æ¯”èµ›è·å¥–</p>
</blockquote>
<h3 id="æŠ€èƒ½"><a href="#æŠ€èƒ½" class="headerlink" title="æŠ€èƒ½"></a>æŠ€èƒ½</h3><blockquote>
<p> ç†Ÿç»ƒæŒæ¡Swiftå¼€å‘è¯­è¨€<br> ç†Ÿç»ƒä»£ç å®ç°UIç¼–å†™<br> ç†Ÿç»ƒæŒæ¡MVCæ¶æ„<br> åŸºæœ¬æŒæ¡Autolayoutã€Masonyã€Xibå¸ƒå±€<br> åŸºæœ¬æŒæ¡Objective-Cå¼€å‘è¯­è¨€<br> åŸºæœ¬æŒæ¡AVFoundationã€UIKitã€Foundationç­‰ç³»ç»Ÿæ¡†æ¶<br> åŸºæœ¬æŒæ¡AFNetworkingã€FMDBã€MBProgressHUDç­‰ç¬¬ä¸‰æ–¹æ¡†æ¶<br> äº†è§£å†…å­˜ç®¡ç†ã€blockã€GCDç­‰å¤šçº¿ç¨‹æŠ€æœ¯çš„ä½¿ç”¨<br> åˆæ­¥äº†è§£Objective-Cçš„runtimeæœºåˆ¶ã€MVVMæ¶æ„ã€ReactiveCocoaå“åº”å¼ç¼–ç¨‹<br> ä½¿ç”¨sqliteåšæ•°æ®æŒä¹…åŒ–ã€Swiftä¸Objective-Cæ··ç¼–ã€Swiftè¯­è¨€æ›´æ–°çš„ç»å†ç­‰</p>
</blockquote>
<h3 id="é¡¹ç›®ç»éªŒ"><a href="#é¡¹ç›®ç»éªŒ" class="headerlink" title="é¡¹ç›®ç»éªŒ"></a>é¡¹ç›®ç»éªŒ</h3><blockquote>
<p> <strong>ç æµ·è½¼åŸŸç½‘ç»œç§‘æŠ€  Mieahé‚®ä»¶å®¢æˆ·ç«¯ iOSç«¯ Swift2.2ï¼ˆ2015.10 - è‡³ä»Šï¼‰</strong><br> ç®€è¿°ï¼š<br>      è·å–Gmail APIï¼Œè·å–é‚®ä»¶æ•°æ®å¹¶è§£æï¼Œé€šè¿‡è”ç³»äººï¼Œå®ç°ç¾¤ç»„åŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯å‘é€ä¸ªäººé‚®ä»¶ã€å¤šäººé‚®ä»¶ä»¥åŠç¾¤ç»„é‚®ä»¶ç­‰åŠŸèƒ½ã€‚</p>
<p> å·¥ä½œå†…å®¹ï¼š<br>      1.æ¥å…¥Gmail APIï¼Œè§£æé‚®ä»¶æ•°æ®ï¼Œè·å–ç”¨æˆ·å’Œè”ç³»äººçš„æ•°æ®ï¼Œå‘é€é‚®ä»¶åŠé™„ä»¶ï¼›<br>      2.Mieahé¡¹ç›®çš„UIä»¥åŠé€»è¾‘å®ç°ï¼ˆå¯¹è¯ã€å¹¿å‘Šé‚®ä»¶ã€è”ç³»äººã€è®¾å®šï¼‰ï¼›<br>      3.åˆ›å»ºç¾¤ç»„ã€åˆ†æå¤šäººé‚®ä»¶ã€æ·»åŠ è”ç³»äººï¼ˆè¾“å…¥emailã€æ‰‹æœºè”ç³»äººï¼‰ç­‰åŠŸèƒ½å®ç°ï¼›<br>      4.é€šè¿‡AFNetworkingæ¡†æ¶å®ç°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„æ•°æ®äº¤äº’ï¼›<br>      5.é€šè¿‡sqliteå’ŒNSUserDefaultå®ç°æ•°æ®æŒä¹…åŒ–å¤„ç†ï¼›<br>      6.é€šè¿‡AVFoundationç³»ç»Ÿæ¡†æ¶å®ç°éŸ³é¢‘å½•åˆ¶ä¸æ’­æ”¾ã€è§†é¢‘å½•åˆ¶è£å‰ªä¸æ’­æ”¾ã€äºŒç»´ç æ‰«æä¸è§£æï¼›<br>      7.è¯»å†™æ²™ç›’æ•°æ®ä»¥åŠç³»ç»Ÿç›¸å†Œæ•°æ®ç­‰ï¼›<br>      8.ç½‘ç»œè¯·æ±‚ã€å†…å­˜ä½¿ç”¨è°ƒä¼˜ã€‚</p>
<p> éš¾ç‚¹ï¼š<br>      é‚®ä»¶å†…å®¹æˆªå–ã€é™„ä»¶æ•°æ®ä¸‹è½½åŠå±•ç¤ºã€ç¾¤ç»„åŠŸèƒ½æ•°æ®ä¸åå°çš„äº¤äº’ç­‰ã€‚</p>
<p> <strong>ç æµ·è½¼åŸŸç½‘ç»œç§‘æŠ€  skillTemp iOSç«¯ Swift2.0ï¼ˆ2015.8 - 2015.10ï¼‰</strong><br> ç®€è¿°ï¼š<br>      ä¸€æ¬¾ç±»ä¼¼äºitalkçš„æŠ€èƒ½äº¤æ˜“å¹³å°ï¼Œç”¨æˆ·å°†è‡ªå·±æ‹¥æœ‰çš„ä¸“ä¸šæŠ€èƒ½ï¼ˆæ´—å‰ªå¹ï¼Œæ•™è‚²æŠ€èƒ½ç­‰ï¼‰æ”¾åˆ°å¹³å°ä¾›éœ€æ±‚ç”¨æˆ·æµè§ˆï¼Œä¹Ÿå¯ä»¥å¯»æ±‚è‡ªå·±éœ€è¦çš„æŠ€èƒ½ï¼Œå¹¶ä¸è¯¥å¯¹è±¡è¾¾æˆæ²Ÿé€šäº¤æ˜“ã€‚ç›®å‰åœ¨é¦™æ¸¯App Storeä¸Šæ¶ã€‚</p>
<p> å·¥ä½œå†…å®¹ï¼š<br>      1.Facebookæ•°æ®ã€åˆ†äº«ã€ç‚¹èµï¼›<br>      2.ç™»é™†å¯†ç åŠ å¯†å½¢å¼ä¸åå°äº¤äº’ï¼›<br>      3.ç”¨æˆ·åè®®åŠéšç§çš„UIå’Œé€»è¾‘å¤„ç†ï¼›<br>      4.ä¿®æ”¹ç¬¬ä¸‰æ–¹å›¾ç‰‡æµè§ˆå™¨ï¼Œåœ¨å›¾ç‰‡æ”¾å¤§æ—¶ï¼Œå‡ºç°ç¼©æ”¾é”™è¯¯Bugä¿®å¤ï¼›<br>      5.ä¸ªäººèµ„æ–™çš„æ˜¾ç¤ºUIä»¥åŠé€»è¾‘ä¿®æ”¹ï¼›<br>      6.ç”¨æˆ·å¯¹è¯ç•Œé¢çš„è¯­éŸ³å‘é€ã€UIå’Œé€»è¾‘ç¼–å†™ï¼›<br>      7.ç”¨æˆ·è”ç³»äººçš„æœ‰åºé€»è¾‘æ˜¾ç¤ºï¼›<br>      8.ç®€å•çš„Google Mapå’ŒiPhoneå†…ç½®åœ°å›¾çš„åˆ‡æ¢æ˜¾ç¤ºæ ‡æ³¨ç­‰é€»è¾‘ï¼›<br>      9.Swiftå‡çº§å¸¦æ¥çš„é—®é¢˜ä¿®å¤ã€‚</p>
<p> éš¾ç‚¹ï¼š<br>      Swiftè¯­è¨€å‡çº§æ—¶ä¿®æ”¹APIå’Œä¿®æ”¹skillTempçš„é€»è¾‘Bugã€‚</p>
</blockquote>
<h3 id="ä¸ªäººé¡¹ç›®"><a href="#ä¸ªäººé¡¹ç›®" class="headerlink" title="ä¸ªäººé¡¹ç›®"></a>ä¸ªäººé¡¹ç›®</h3><blockquote>
<p> <strong>Cè¯­è¨€æ•™å­¦è¾…åŠ©ç³»ç»Ÿ iOSç«¯ Objective-C(å­¦æ ¡è€å¸ˆå¸¦é¢†çš„é¡¹ç›®)</strong><br> ç®€è¿°ï¼šç»“åˆæ•™å­¦å¤§çº²ï¼Œåˆ¶å®šä¸åŒç»ƒä¹ æ¨¡å¼çš„æ•™å­¦è¾…åŠ©çš„åº”ç”¨ã€‚<br> å†…å®¹ï¼šåˆ¶å®šç»ƒä¹ æ¨¡å¼ï¼Œå®Œæˆç¼–ç å®ç°ã€‚<br> éš¾ç‚¹ï¼šObjective-Cè¯­è¨€å­¦ä¹ </p>
</blockquote>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><blockquote>
<p> å–œæ¬¢æ€è€ƒï¼Œå–œæ¬¢ä¸äººäº¤è°ˆ<br> çˆ±çœ‹ç¾å‰§<br> åœ¨æ­ç”µACMåˆ·é¢˜ï¼ˆå¤§å­¦ï¼‰ï¼Œleetcodeåˆ·é¢˜ï¼ˆä»˜è´¹çš„å¤ªè´µï¼Œåªèƒ½çœ‹ï¼‰</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="ySenIn" />
          <p class="site-author-name" itemprop="name">ySenIn</p>
          <p class="site-description motion-element" itemprop="description">ä¸€ä¸ªå­¤ç‹¬çš„äººï¼Œä¸€ä¸ªä¸æƒ³å­¤ç‹¬çš„äºº</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">14</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">pv: <span id="busuanzi_value_site_pv"></span></span>
  <span id="busuanzi_container_site_uv">uv: <span id="busuanzi_value_site_uv"></span></span>
  <span class="author" itemprop="copyrightHolder">ySenIn</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="http://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"ysenin"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
